import{T as e,E as l}from"./@wangeditor-Ur0005c_.js";import{g as t}from"./index-DWGcUZYU.js";import{S as a}from"./sys-file-api-DidooOQP.js";import{E as o}from"./element-plus-B9gGnqkL.js";import{d as r,s,_ as i,B as d,w as u,o as m,c as n,V as p,u as g,K as c,r as f,ah as h,P as y,a as b,U as F,T as S}from"./@vue-CX_mlhJe.js";import{S as w}from"./sys-notice-api-BafTVakZ.js";const x={class:"editor-container"},V=r({name:"wngEditor"}),_=r({...V,props:{disable:{type:Boolean,default:()=>!1},placeholder:{type:String,default:()=>"请输入内容..."},mode:{type:String,default:()=>"default"},height:{type:String,default:()=>"310px"},getHtml:String,getText:String},emits:["update:getHtml","update:getText"],setup(r,{emit:f}){const h=r,y=f,b=s(),F=i({editorConfig:{placeholder:h.placeholder,MENU_CONF:{uploadImage:{fieldName:"file",customUpload(e,l){(async()=>{const r=await t(a).apiSysFileUploadFilePostForm(e);"success"==r.data.type&&null!=r.data.result?l(r.data.result.url,r.data.result.name,r.data.result.url):o.error("上传失败！")})()}},insertImage:{checkImage:(e,l,t)=>0===e.indexOf("http")||"图片网址必须以 http/https 开头"}}},editorVal:h.getHtml}),S=e=>{b.value=e},w=e=>{y("update:getHtml",e.getHtml()),y("update:getText",e.getText())};return d((()=>{const e=b.value;null!=e&&e.destroy()})),u((()=>h.disable),(e=>{const l=b.value;null!=l&&(e?l.disable():l.enable())}),{deep:!0}),u((()=>h.getHtml),(e=>{F.editorVal=e}),{deep:!0}),(t,a)=>(m(),n("div",x,[p(g(e),{editor:b.value,mode:r.mode},null,8,["editor","mode"]),p(g(l),{mode:r.mode,defaultConfig:F.editorConfig,style:c({height:r.height}),modelValue:F.editorVal,"onUpdate:modelValue":a[0]||(a[0]=e=>F.editorVal=e),onOnCreated:S,onOnChange:w},null,8,["mode","defaultConfig","style","modelValue"])]))}}),v={class:"sys-notice-container"},C={style:{color:"#fff"}},U={class:"dialog-footer"},N=r({name:"sysNoticeEdit"}),j=r({...N,props:{title:String},emits:["handleQuery"],setup(e,{expose:l,emit:a}){const o=e,r=a,s=f(),d=i({isShowDialog:!1,ruleForm:{}}),u=()=>{d.isShowDialog=!1},g=()=>{s.value.validate((async e=>{e&&(null!=d.ruleForm.id&&d.ruleForm.id>0?await t(w).apiSysNoticeUpdatePost(d.ruleForm):await t(w).apiSysNoticeAddPost(d.ruleForm),r("handleQuery"),d.isShowDialog=!1)}))};return l({openDialog:e=>{var l;d.ruleForm=JSON.parse(JSON.stringify(e)),d.isShowDialog=!0,null==(l=s.value)||l.resetFields()}}),(e,l)=>{const t=h("ele-Edit"),a=h("el-icon"),r=h("el-input"),i=h("el-form-item"),c=h("el-col"),f=h("el-option"),w=h("el-select"),x=h("el-row"),V=h("el-form"),N=h("el-button"),j=h("el-dialog");return m(),n("div",v,[p(j,{modelValue:d.isShowDialog,"onUpdate:modelValue":l[3]||(l[3]=e=>d.isShowDialog=e),draggable:"","close-on-click-modal":!1,width:"900px"},{header:y((()=>[b("div",C,[p(a,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:y((()=>[p(t)])),_:1}),b("span",null,F(o.title),1)])])),footer:y((()=>[b("span",U,[p(N,{onClick:u},{default:y((()=>[S("取 消")])),_:1}),p(N,{type:"primary",onClick:g},{default:y((()=>[S("确 定")])),_:1})])])),default:y((()=>[p(V,{model:d.ruleForm,ref_key:"ruleFormRef",ref:s,"label-width":"auto"},{default:y((()=>[p(x,{gutter:35},{default:y((()=>[p(c,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:y((()=>[p(i,{label:"标题",prop:"title",rules:[{required:!0,message:"标题不能为空",trigger:"blur"}]},{default:y((()=>[p(r,{modelValue:d.ruleForm.title,"onUpdate:modelValue":l[0]||(l[0]=e=>d.ruleForm.title=e),placeholder:"标题",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),p(c,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:y((()=>[p(i,{label:"类型",prop:"type",rules:[{required:!0,message:"类型不能为空",trigger:"blur"}]},{default:y((()=>[p(w,{modelValue:d.ruleForm.type,"onUpdate:modelValue":l[1]||(l[1]=e=>d.ruleForm.type=e),placeholder:"类型",filterable:"","allow-create":"","default-first-option":"",style:{width:"100%"}},{default:y((()=>[p(f,{label:"通知",value:1}),p(f,{label:"公告",value:2})])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(c,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:y((()=>[p(i,{label:"内容",prop:"content",rules:[{required:!0,message:"内容不能为空",trigger:"blur"}]},{default:y((()=>[p(_,{"get-html":d.ruleForm.content,"onUpdate:getHtml":l[2]||(l[2]=e=>d.ruleForm.content=e)},null,8,["get-html"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{j as _};
