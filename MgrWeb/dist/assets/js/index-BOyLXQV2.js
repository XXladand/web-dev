import e from"./orgTree-CG-9udoW.js";import{_ as a}from"./editOrg.vue_vue_type_script_setup_true_name_sysEditOrg_lang-DP2UGCKi.js";import{_ as t}from"./modifyRecord.vue_vue_type_script_setup_true_lang-BJJtdc8n.js";import{g as r}from"./index-DWGcUZYU.js";import{S as o}from"./sys-dict-data-api-Dup6m-Lx.js";import{S as l}from"./sys-org-api-BuTSvnhC.js";import{c as i,E as s}from"./element-plus-B9gGnqkL.js";import{d as p,r as d,_ as n,j as u,ah as m,ap as c,o as y,c as g,V as f,P as j,F as v,a8 as _,T as h,Q as w,O as b}from"./@vue-CX_mlhJe.js";import"./@element-plus-BOmeTCVz.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./pinia-CUaEdNPK.js";import"./vue-demi-DMxTsK9-.js";import"./vue-DMOwXDUL.js";import"./@babel-Q_QrznUx.js";import"./jspdf-CH-AZmyM.js";import"./fflate-B3Xb404m.js";import"./vue-router-DCQgfElv.js";import"./vue-i18n-DOLUIXgH.js";import"./@intlify-8Jop7_C0.js";import"./js-cookie-BXEMiIsG.js";import"./nprogress-BXoedg-7.js";import"./axios-CURSphCx.js";import"./lodash-es-Bx2dc0Qf.js";import"./@vueuse-DXufPiA3.js";import"./@sxzz-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-DCN6noHZ.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DHjS97uh.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-DUD0Qdrs.js";import"./vform3-builds-n_pM9nIF.js";import"./vue-signature-pad-lyh4QR3Z.js";import"./signature_pad-edH0THtw.js";import"./merge-images-Cwm9rL5U.js";import"./vue3-tree-org-BzkJto3m.js";/* empty css                    */import"./vue-plugin-hiprint-DZDwPE-S.js";import"./jquery-VSNIoD5U.js";import"./jsbarcode-BgYCXnWS.js";import"./socket.io-client-Czs-wWz3.js";import"./engine.io-client-CYjl6Vq_.js";import"./engine.io-parser-BcOgFIoq.js";import"./@socket.io-mcuM6LAc.js";import"./debug-CmirTkX5.js";import"./ms-CufoL-nS.js";import"./socket.io-parser-CnrqkM7d.js";import"./canvg-FiHv1N34.js";import"./core-js-BJmvCVxN.js";import"./raf-B8RiLMb0.js";import"./performance-now-D4QiMMAM.js";import"./rgbcolor-Cv9DR9SS.js";import"./svg-pathdata-BQypvdxQ.js";import"./stackblur-canvas-WbqePTkn.js";const P={class:"sys-org-container"},q=p({name:"sysOrg"}),k=p({...q,setup(p){const q=d(),k=d(),D=n({loading:!1,orgData:[],orgTreeData:[],queryParams:{id:0,name:void 0,code:void 0,type:void 0},editOrgTitle:"",orgTypeList:[]});u((async()=>{T();let e=await r(o).apiSysDictDataDataListCodeGet("org_type");D.orgTypeList=e.data.result}));const T=async(e=!1)=>{var a;D.loading=!0;var t=await r(l).apiSysOrgListGet(D.queryParams.id,D.queryParams.name,D.queryParams.code,D.queryParams.type);if(D.orgData=t.data.result??[],D.loading=!1,1==e){null==(a=k.value)||a.initTreeData();t=await r(l).apiSysOrgListGet(0);D.orgTreeData=t.data.result??[]}0==D.queryParams.id&&null==D.queryParams.name&&null==D.queryParams.code&&null==D.queryParams.type&&0==e&&(D.orgTreeData=D.orgData)},x=()=>{D.queryParams.id=0,D.queryParams.name=void 0,D.queryParams.code=void 0,D.queryParams.type=void 0,T()},O=()=>{var e;D.editOrgTitle="添加机构",null==(e=q.value)||e.openDialog({status:1,orderNo:100})},C=async e=>{D.queryParams.id=e.id,D.queryParams.name=void 0,D.queryParams.code=void 0,D.queryParams.type=void 0,T()},L=(e,a,t)=>{var r;return null==(r=D.orgTypeList.find((e=>e.code==t)))?void 0:r.value};return(o,p)=>{const d=m("el-col"),n=m("el-input"),u=m("el-form-item"),V=m("el-option"),S=m("el-select"),z=m("el-button"),R=m("el-button-group"),E=m("el-form"),G=m("el-card"),N=m("el-table-column"),B=m("el-tag"),F=m("el-table"),U=m("el-row"),M=c("auth"),Q=c("loading");return y(),g("div",P,[f(U,{gutter:5,style:{width:"100%",flex:"1"}},{default:j((()=>[f(d,{span:4,xs:24},{default:j((()=>[f(e,{ref_key:"orgTreeRef",ref:k,onNodeClick:C},null,512)])),_:1}),f(d,{span:20,xs:24,style:{display:"flex","flex-direction":"column"}},{default:j((()=>[f(G,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:j((()=>[f(E,{model:D.queryParams,ref:"queryForm",inline:!0},{default:j((()=>[f(u,{label:"机构名称"},{default:j((()=>[f(n,{modelValue:D.queryParams.name,"onUpdate:modelValue":p[0]||(p[0]=e=>D.queryParams.name=e),placeholder:"机构名称",clearable:""},null,8,["modelValue"])])),_:1}),f(u,{label:"机构类型"},{default:j((()=>[f(S,{modelValue:D.queryParams.type,"onUpdate:modelValue":p[1]||(p[1]=e=>D.queryParams.type=e),filterable:"",clearable:""},{default:j((()=>[(y(!0),g(v,null,_(D.orgTypeList,(e=>(y(),b(V,{key:e.value,label:e.value,value:e.code},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(u,null,{default:j((()=>[f(R,null,{default:j((()=>[f(z,{type:"primary",icon:"ele-Search",onClick:T},{default:j((()=>[h(" 查询 ")])),_:1}),f(z,{icon:"ele-Refresh",onClick:x},{default:j((()=>[h(" 重置 ")])),_:1})])),_:1})])),_:1}),f(u,null,{default:j((()=>[w((y(),b(z,{type:"primary",icon:"ele-Plus",onClick:O},{default:j((()=>[h(" 新增 ")])),_:1})),[[M,"sysOrg:add"]])])),_:1})])),_:1},8,["model"])])),_:1}),f(G,{class:"full-table",shadow:"hover",style:{"margin-top":"5px"}},{default:j((()=>[w((y(),b(F,{data:D.orgData,style:{width:"100%"},"row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},border:""},{default:j((()=>[f(N,{prop:"name",label:"机构名称","min-width":"160","header-align":"center","show-overflow-tooltip":""}),f(N,{prop:"code",label:"机构编码",align:"center","show-overflow-tooltip":""}),f(N,{prop:"level",label:"级别",width:"70",align:"center","show-overflow-tooltip":""}),f(N,{prop:"type",label:"机构类型",align:"center",formatter:L,"show-overflow-tooltip":""}),f(N,{prop:"orderNo",label:"排序",width:"70",align:"center","show-overflow-tooltip":""}),f(N,{label:"状态",width:"70",align:"center","show-overflow-tooltip":""},{default:j((e=>[1===e.row.status?(y(),b(B,{key:0,type:"success"},{default:j((()=>[h("启用")])),_:1})):(y(),b(B,{key:1,type:"danger"},{default:j((()=>[h("禁用")])),_:1}))])),_:1}),f(N,{label:"修改记录",width:"100",align:"center","show-overflow-tooltip":""},{default:j((e=>[f(t,{data:e.row},null,8,["data"])])),_:1}),f(N,{label:"操作",width:"140",fixed:"right",align:"center","show-overflow-tooltip":""},{default:j((e=>[w((y(),b(z,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:a=>{return t=e.row,D.editOrgTitle="编辑机构",void(null==(r=q.value)||r.openDialog(t));var t,r}},{default:j((()=>[h(" 编辑 ")])),_:2},1032,["onClick"])),[[M,"sysOrg:update"]]),w((y(),b(z,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:a=>{return t=e.row,void i.confirm(`确定删除机构：【${t.name}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await r(l).apiSysOrgDeletePost({id:t.id}),s.success("删除成功"),T(!0)})).catch((()=>{}));var t}},{default:j((()=>[h(" 删除 ")])),_:2},1032,["onClick"])),[[M,"sysOrg:delete"]])])),_:1})])),_:1},8,["data"])),[[Q,D.loading]])])),_:1})])),_:1})])),_:1}),f(a,{ref_key:"editOrgRef",ref:q,title:D.editOrgTitle,orgData:D.orgTreeData,onReload:T},null,8,["title","orgData"])])}}});export{k as default};
