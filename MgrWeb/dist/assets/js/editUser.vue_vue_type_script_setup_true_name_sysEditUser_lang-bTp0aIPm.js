import{s as l}from"./pinia-CUaEdNPK.js";import{a as e,g as a}from"./index-DWGcUZYU.js";import{S as o}from"./sys-pos-api-DICRJefz.js";import{S as r}from"./sys-role-api-CtWvDK07.js";import{S as d}from"./sys-user-api-CGBglDdl.js";import{d as u,r as s,_ as t,j as m,ah as i,ap as n,o as p,c,V as b,P as g,a as f,U as V,T as x,Q as _,O as F,F as h,a8 as y,u as v,S as U}from"./@vue-CX_mlhJe.js";const w={class:"sys-user-container"},I={style:{color:"#fff"}},D=f("div",{style:{color:"#b1b3b8"}},"机构组织",-1),L={key:0},k=f("div",{style:{color:"#b1b3b8"}},"附属机构",-1),O=f("span",{style:{"font-size":"12px",color:"gray","padding-left":"5px"}}," 具有相应组织机构的数据权限 ",-1),S=f("span",{class:"ml5"},"机构",-1),N={key:0},T={class:"dialog-footer"},Y=u({name:"sysEditUser"}),j=u({...Y,props:{title:String,orgData:Array},emits:["handleQuery"],setup(u,{expose:Y,emit:j}){const P=u,q=j,C=s(),M=e(),{userInfos:A}=l(M),z=t({loading:!1,isShowDialog:!1,selectedTabName:"0",ruleForm:{},posData:[],roleData:[]});m((async()=>{z.loading=!0;var l=await a(o).apiSysPosListGet();z.posData=l.data.result??[];var e=await a(r).apiSysRoleListGet();z.roleData=e.data.result??[],z.loading=!1}));const G=()=>{z.isShowDialog=!1},E=()=>{C.value.validate((async l=>{l&&(null!=z.ruleForm.id&&z.ruleForm.id>0?await a(d).apiSysUserUpdatePost(z.ruleForm):await a(d).apiSysUserAddPost(z.ruleForm),q("handleQuery"),z.isShowDialog=!1)}))},Q=()=>{var l;null==z.ruleForm.extOrgIdList&&(z.ruleForm.extOrgIdList=[]),null==(l=z.ruleForm.extOrgIdList)||l.push({})};return Y({openDialog:async l=>{var e;if(null==(e=C.value)||e.resetFields(),z.selectedTabName="0",z.ruleForm=JSON.parse(JSON.stringify(l)),null!=l.id){var o=await a(d).apiSysUserOwnRoleListUserIdGet(l.id);z.ruleForm.roleIdList=o.data.result;var r=await a(d).apiSysUserOwnExtOrgListUserIdGet(l.id);z.ruleForm.extOrgIdList=r.data.result}else z.ruleForm.accountType=777;z.isShowDialog=!0}}),(l,e)=>{const a=i("ele-Edit"),o=i("el-icon"),r=i("el-input"),d=i("el-form-item"),u=i("el-col"),s=i("el-option"),t=i("el-select"),m=i("el-input-number"),Y=i("el-divider"),j=i("el-cascader"),q=i("el-date-picker"),M=i("el-button"),R=i("el-row"),J=i("el-empty"),$=i("el-form"),B=i("el-tab-pane"),H=i("el-radio"),K=i("el-radio-group"),W=i("el-tabs"),X=i("el-dialog"),Z=n("loading");return p(),c("div",w,[b(X,{modelValue:z.isShowDialog,"onUpdate:modelValue":e[29]||(e[29]=l=>z.isShowDialog=l),draggable:"","close-on-click-modal":!1,width:"700px"},{header:g((()=>[f("div",I,[b(o,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:g((()=>[b(a)])),_:1}),f("span",null,V(P.title),1)])])),footer:g((()=>[f("span",T,[b(M,{onClick:G},{default:g((()=>[x("取 消")])),_:1}),b(M,{type:"primary",onClick:E},{default:g((()=>[x("确 定")])),_:1})])])),default:g((()=>[_((p(),F(W,{modelValue:z.selectedTabName,"onUpdate:modelValue":e[28]||(e[28]=l=>z.selectedTabName=l)},{default:g((()=>[b(B,{label:"基础信息",style:{height:"550px","overflow-y":"auto","overflow-x":"hidden"}},{default:g((()=>[b($,{model:z.ruleForm,ref_key:"ruleFormRef",ref:C,"label-width":"auto"},{default:g((()=>[b(R,{gutter:35},{default:g((()=>[b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"账号名称",prop:"account",rules:[{required:!0,message:"账号名称不能为空",trigger:"blur"}]},{default:g((()=>[b(r,{modelValue:z.ruleForm.account,"onUpdate:modelValue":e[0]||(e[0]=l=>z.ruleForm.account=l),placeholder:"账号名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"昵称"},{default:g((()=>[b(r,{modelValue:z.ruleForm.nickName,"onUpdate:modelValue":e[1]||(e[1]=l=>z.ruleForm.nickName=l),placeholder:"昵称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"手机号码",prop:"phone",rules:[{required:!0,message:"手机号码不能为空",trigger:"blur"}]},{default:g((()=>[b(r,{modelValue:z.ruleForm.phone,"onUpdate:modelValue":e[2]||(e[2]=l=>z.ruleForm.phone=l),placeholder:"手机号码",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"真实姓名",prop:"realName",rules:[{required:!0,message:"真实姓名不能为空",trigger:"blur"}]},{default:g((()=>[b(r,{modelValue:z.ruleForm.realName,"onUpdate:modelValue":e[3]||(e[3]=l=>z.ruleForm.realName=l),placeholder:"真实姓名",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"角色集合",prop:"roleIdList",rules:[{required:!0,message:"角色集合不能为空",trigger:"blur"}]},{default:g((()=>[b(t,{modelValue:z.ruleForm.roleIdList,"onUpdate:modelValue":e[4]||(e[4]=l=>z.ruleForm.roleIdList=l),multiple:"","value-key":"id",clearable:"",placeholder:"角色集合","collapse-tags":"","collapse-tags-tooltip":"",class:"w100",filterable:""},{default:g((()=>[(p(!0),c(h,null,y(z.roleData,(l=>(p(),F(s,{key:l.id,label:l.name,value:l.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"账号类型",prop:"accountType",rules:[{required:!0,message:"账号类型不能为空",trigger:"blur"}]},{default:g((()=>[b(t,{modelValue:z.ruleForm.accountType,"onUpdate:modelValue":e[5]||(e[5]=l=>z.ruleForm.accountType=l),placeholder:"账号类型","collapse-tags":"","collapse-tags-tooltip":"",class:"w100"},{default:g((()=>[b(s,{label:"系统管理员",value:888,disabled:888!=v(A).accountType&&999!=v(A).accountType},null,8,["disabled"]),b(s,{label:"普通账号",value:777}),b(s,{label:"会员",value:666})])),_:1},8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"邮箱"},{default:g((()=>[b(r,{modelValue:z.ruleForm.email,"onUpdate:modelValue":e[6]||(e[6]=l=>z.ruleForm.email=l),placeholder:"邮箱",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb5"},{default:g((()=>[b(d,{label:"排序"},{default:g((()=>[b(m,{modelValue:z.ruleForm.orderNo,"onUpdate:modelValue":e[7]||(e[7]=l=>z.ruleForm.orderNo=l),placeholder:"排序",class:"w100"},null,8,["modelValue"])])),_:1})])),_:1}),b(Y,{"border-style":"dashed","content-position":"center"},{default:g((()=>[D])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"所属机构",prop:"orgId",rules:[{required:!0,message:"所属机构不能为空",trigger:"blur"}]},{default:g((()=>[b(j,{options:P.orgData,props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",expandTrigger:"hover"},placeholder:"所属机构",clearable:"",class:"w100",modelValue:z.ruleForm.orgId,"onUpdate:modelValue":e[8]||(e[8]=l=>z.ruleForm.orgId=l)},{default:g((({node:l,data:e})=>[f("span",null,V(e.name),1),l.isLeaf?U("",!0):(p(),c("span",L," ("+V(e.children.length)+") ",1))])),_:1},8,["options","modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"职位",prop:"posId",rules:[{required:!0,message:"职位名称不能为空",trigger:"blur"}]},{default:g((()=>[b(t,{modelValue:z.ruleForm.posId,"onUpdate:modelValue":e[9]||(e[9]=l=>z.ruleForm.posId=l),placeholder:"职位",class:"w100"},{default:g((()=>[(p(!0),c(h,null,y(z.posData,(l=>(p(),F(s,{key:l.id,label:l.name,value:l.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"工号"},{default:g((()=>[b(r,{modelValue:z.ruleForm.jobNum,"onUpdate:modelValue":e[10]||(e[10]=l=>z.ruleForm.jobNum=l),placeholder:"工号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"域账号"},{default:g((()=>[b(r,{modelValue:z.ruleForm.domainAccount,"onUpdate:modelValue":e[11]||(e[11]=l=>z.ruleForm.domainAccount=l),placeholder:"域账号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"入职日期"},{default:g((()=>[b(q,{modelValue:z.ruleForm.joinDate,"onUpdate:modelValue":e[12]||(e[12]=l=>z.ruleForm.joinDate=l),type:"date",placeholder:"入职日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",class:"w100"},null,8,["modelValue"])])),_:1})])),_:1}),b(Y,{"border-style":"dashed","content-position":"center"},{default:g((()=>[k])),_:1}),b(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:g((()=>[b(M,{icon:"ele-Plus",type:"primary",plain:"",onClick:Q},{default:g((()=>[x(" 增加附属机构 ")])),_:1}),O])),_:1}),b(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:g((()=>[null!=z.ruleForm.extOrgIdList&&z.ruleForm.extOrgIdList.length>0?(p(!0),c(h,{key:0},y(z.ruleForm.extOrgIdList,((l,e)=>(p(),F(R,{gutter:35,key:e},{default:g((()=>[b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"机构",prop:`extOrgIdList[${e}].orgId`,rules:[{required:!0,message:"机构不能为空",trigger:"blur"}]},{label:g((()=>[b(M,{icon:"ele-Delete",type:"danger",circle:"",plain:"",size:"small",onClick:l=>(l=>{var e;null==(e=z.ruleForm.extOrgIdList)||e.splice(l,1)})(e)},null,8,["onClick"]),S])),default:g((()=>[b(j,{options:P.orgData,props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",expandTrigger:"hover"},placeholder:"机构组织",clearable:"",class:"w100",modelValue:z.ruleForm.extOrgIdList[e].orgId,"onUpdate:modelValue":l=>z.ruleForm.extOrgIdList[e].orgId=l},{default:g((({node:l,data:e})=>[f("span",null,V(e.name),1),l.isLeaf?U("",!0):(p(),c("span",N," ("+V(e.children.length)+") ",1))])),_:2},1032,["options","modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])])),_:2},1024),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"职位",prop:`extOrgIdList[${e}].posId`,rules:[{required:!0,message:"职位不能为空",trigger:"blur"}]},{default:g((()=>[b(t,{modelValue:z.ruleForm.extOrgIdList[e].posId,"onUpdate:modelValue":l=>z.ruleForm.extOrgIdList[e].posId=l,placeholder:"职位名称",class:"w100"},{default:g((()=>[(p(!0),c(h,null,y(z.posData,(l=>(p(),F(s,{key:l.id,label:l.name,value:l.id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])])),_:2},1024)])),_:2},1024)))),128)):(p(),F(J,{key:1,"image-size":50,description:"空数据"}))])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),b(B,{label:"档案信息",style:{height:"550px","overflow-y":"auto","overflow-x":"hidden"}},{default:g((()=>[b($,{model:z.ruleForm,"label-width":"auto"},{default:g((()=>[b(R,{gutter:35},{default:g((()=>[b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"证件类型",prop:"cardType"},{default:g((()=>[b(t,{modelValue:z.ruleForm.cardType,"onUpdate:modelValue":e[13]||(e[13]=l=>z.ruleForm.cardType=l),placeholder:"证件类型",class:"w100"},{default:g((()=>[b(s,{label:"身份证",value:0}),b(s,{label:"护照",value:1}),b(s,{label:"出生证",value:2}),b(s,{label:"港澳台通行证",value:3}),b(s,{label:"外国人居留证",value:4})])),_:1},8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"证件号码"},{default:g((()=>[b(r,{modelValue:z.ruleForm.idCardNum,"onUpdate:modelValue":e[14]||(e[14]=l=>z.ruleForm.idCardNum=l),placeholder:"证件号码",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"出生日期",prop:"birthday"},{default:g((()=>[b(q,{modelValue:z.ruleForm.birthday,"onUpdate:modelValue":e[15]||(e[15]=l=>z.ruleForm.birthday=l),type:"date",placeholder:"出生日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",class:"w100"},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"性别"},{default:g((()=>[b(K,{modelValue:z.ruleForm.sex,"onUpdate:modelValue":e[16]||(e[16]=l=>z.ruleForm.sex=l)},{default:g((()=>[b(H,{value:1},{default:g((()=>[x("男")])),_:1}),b(H,{value:2},{default:g((()=>[x("女")])),_:1}),b(H,{value:3},{default:g((()=>[x("其他")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb5"},{default:g((()=>[b(d,{label:"年龄"},{default:g((()=>[b(m,{modelValue:z.ruleForm.age,"onUpdate:modelValue":e[17]||(e[17]=l=>z.ruleForm.age=l),placeholder:"年龄",class:"w100"},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"民族"},{default:g((()=>[b(r,{modelValue:z.ruleForm.nation,"onUpdate:modelValue":e[18]||(e[18]=l=>z.ruleForm.nation=l),placeholder:"民族",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:g((()=>[b(d,{label:"地址"},{default:g((()=>[b(r,{modelValue:z.ruleForm.address,"onUpdate:modelValue":e[19]||(e[19]=l=>z.ruleForm.address=l),placeholder:"地址",clearable:"",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"毕业学校"},{default:g((()=>[b(r,{modelValue:z.ruleForm.college,"onUpdate:modelValue":e[20]||(e[20]=l=>z.ruleForm.college=l),placeholder:"毕业学校",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"文化程度"},{default:g((()=>[b(t,{modelValue:z.ruleForm.cultureLevel,"onUpdate:modelValue":e[21]||(e[21]=l=>z.ruleForm.cultureLevel=l),placeholder:"文化程度",class:"w100"},{default:g((()=>[b(s,{label:"其他",value:0}),b(s,{label:"小学",value:1}),b(s,{label:"初中",value:2}),b(s,{label:"普通高中",value:3}),b(s,{label:"技工学校",value:4}),b(s,{label:"职业教育",value:5}),b(s,{label:"职业高中",value:6}),b(s,{label:"中等专科",value:7}),b(s,{label:"大学专科",value:8}),b(s,{label:"大学本科",value:9}),b(s,{label:"硕士研究生",value:10}),b(s,{label:"博士研究生",value:11})])),_:1},8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"政治面貌"},{default:g((()=>[b(r,{modelValue:z.ruleForm.politicalOutlook,"onUpdate:modelValue":e[22]||(e[22]=l=>z.ruleForm.politicalOutlook=l),placeholder:"政治面貌",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"办公电话"},{default:g((()=>[b(r,{modelValue:z.ruleForm.officePhone,"onUpdate:modelValue":e[23]||(e[23]=l=>z.ruleForm.officePhone=l),placeholder:"办公电话",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"紧急联系人"},{default:g((()=>[b(r,{modelValue:z.ruleForm.emergencyContact,"onUpdate:modelValue":e[24]||(e[24]=l=>z.ruleForm.emergencyContact=l),placeholder:"紧急联系人",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:g((()=>[b(d,{label:"联系人电话"},{default:g((()=>[b(r,{modelValue:z.ruleForm.emergencyPhone,"onUpdate:modelValue":e[25]||(e[25]=l=>z.ruleForm.emergencyPhone=l),placeholder:"联系人电话",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:g((()=>[b(d,{label:"联系人地址"},{default:g((()=>[b(r,{modelValue:z.ruleForm.emergencyAddress,"onUpdate:modelValue":e[26]||(e[26]=l=>z.ruleForm.emergencyAddress=l),placeholder:"联系人地址",clearable:"",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1}),b(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:g((()=>[b(d,{label:"备注"},{default:g((()=>[b(r,{modelValue:z.ruleForm.remark,"onUpdate:modelValue":e[27]||(e[27]=l=>z.ruleForm.remark=l),placeholder:"备注",clearable:"",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"])),[[Z,z.loading]])])),_:1},8,["modelValue"])])}}});export{j as _};
