import{d as e,r as l,j as a,ah as t,o as s,c as o,V as u,P as d,a as r,U as p,u as m,T as n,Q as c,F as i,a8 as v,W as f,O as g,S as b}from"./@vue-CX_mlhJe.js";import{g as _}from"./dict-utils-LXnBJ9wT.js";import{r as y}from"./request-Cv12-fnH.js";import{G as h,E as V}from"./netSearch-R0ZFwHor.js";import{E as k}from"./element-plus-B9gGnqkL.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";const T=e=>y({url:"/api/customNetTask/RunCustomTask",method:"post",data:e}),U=e=>y({url:"/api/customNetTask/delete",method:"post",data:e}),w=e=>y({url:"/api/customNetTask/page",method:"post",data:e}),N={class:"customNetTask-container"},j={style:{color:"#fff"}},S={class:"button-container-end"},$={class:"button-container-center"},C={class:"dialog-footer"},O=x(e({__name:"editDialog",props:{title:{type:String,default:""}},emits:["reloadTable"],setup(e,{expose:x,emit:T}){var U=e;const w=T,O=l(),q=l(!1),L=l({}),D=l([]),R=l({name:[{required:!0,message:"请输入名称！",trigger:"blur"}],deep:[{required:!0,message:"请选择爬取深度！",trigger:"change"}]});a((()=>{h({type:V.BingTranslate}).then((e=>{D.value=e.data.result}))}));const z=()=>{q.value=!1},E=async()=>{L.value.process.push({})},F=async e=>{L.value.process.splice(e,1)},J=async()=>{const e=L.value.process,l=e.map((e=>e.processType));for(let a=0;a<e.length;a++){const t=e[a];if(!t.processType)return k({message:"请选择处理类型！",type:"error"});if(new Set(l).size!==e.length)return k({message:"处理类型重复！",type:"error"});if((3==t.processType||4==t.processType)&&!t.tanslateLanguage)return k({message:"请选择翻译语言！",type:"error"})}O.value.validate((async(e,l)=>{if(e){let e=L.value;null==L.value.id||null==L.value.id||""==L.value.id||0==L.value.id?await(a=e,y({url:"/api/customNetTask/add",method:"post",data:a})):await(e=>y({url:"/api/customNetTask/update",method:"post",data:e}))(e),w("reloadTable"),q.value=!1}else k({message:`表单有${Object.keys(l).length}处验证失败，请修改后再提交`,type:"error"});var a}))};return x({openDialog:async e=>{let l=JSON.parse(JSON.stringify(e));var a;l.id?L.value=(await(a=l.id,y({url:"/api/customNetTask/detail",method:"get",data:{id:a}}))).data.result:(L.value=l,L.value.process=L.value.process||[{}]),q.value=!0}}),(e,l)=>{const a=t("el-input"),y=t("el-form-item"),h=t("el-col"),V=t("el-option"),k=t("el-select"),x=t("el-switch"),T=t("el-row"),w=t("el-divider"),P=t("el-button"),B=t("el-form"),G=t("el-dialog");return s(),o("div",N,[u(G,{modelValue:q.value,"onUpdate:modelValue":l[5]||(l[5]=e=>q.value=e),width:800,draggable:"","close-on-click-modal":!1},{header:d((()=>[r("div",j,[r("span",null,p(m(U).title),1)])])),footer:d((()=>[r("span",C,[u(P,{onClick:z},{default:d((()=>[n("取 消")])),_:1}),u(P,{type:"primary",onClick:J},{default:d((()=>[n("确 定")])),_:1})])])),default:d((()=>[u(B,{model:L.value,ref_key:"ruleFormRef",ref:O,"label-width":"auto",rules:R.value},{default:d((()=>[u(T,{gutter:35},{default:d((()=>[c(u(y,null,{default:d((()=>[u(a,{modelValue:L.value.id,"onUpdate:modelValue":l[0]||(l[0]=e=>L.value.id=e)},null,8,["modelValue"])])),_:1},512),[[f,!1]]),u(h,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:d((()=>[u(y,{label:"名称",prop:"name"},{default:d((()=>[u(a,{modelValue:L.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>L.value.name=e),placeholder:"请输入名称",maxlength:"64","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),u(h,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:d((()=>[u(y,{label:"任务数据",prop:"data"},{default:d((()=>[u(a,{modelValue:L.value.data,"onUpdate:modelValue":l[2]||(l[2]=e=>L.value.data=e),placeholder:"请输入任务数据",type:"textarea",maxlength:"2000","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),u(h,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:d((()=>[u(y,{label:"爬取深度",prop:"deep"},{default:d((()=>[u(k,{clearable:"",modelValue:L.value.deep,"onUpdate:modelValue":l[3]||(l[3]=e=>L.value.deep=e),placeholder:"请选择爬取深度"},{default:d((()=>[(s(!0),o(i,null,v(m(_)("pqsd"),((e,l)=>(s(),g(V,{key:l,value:Number(e.code),label:`[${e.code}] ${e.value}`},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),u(h,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:d((()=>[u(y,{label:"绕过反爬",prop:"isUnlocker"},{default:d((()=>[u(x,{modelValue:L.value.isUnlocker,"onUpdate:modelValue":l[4]||(l[4]=e=>L.value.isUnlocker=e),"active-text":"是","inactive-text":"否"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(w),(s(!0),o(i,null,v(L.value.process,((e,l)=>(s(),o("div",{key:l},[u(T,{gutter:35},{default:d((()=>[u(h,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:d((()=>[u(y,{label:"处理类型",prop:"processType"},{default:d((()=>[u(k,{clearable:"",modelValue:e.processType,"onUpdate:modelValue":l=>e.processType=l,placeholder:"请选择处理类型"},{default:d((()=>[(s(!0),o(i,null,v(m(_)("cllx"),((e,l)=>(s(),g(V,{key:l,value:Number(e.code),label:`[${e.code}] ${e.value}`},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),u(h,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:d((()=>[3==e.processType||4==e.processType?(s(),g(y,{key:0,label:"翻译语言",prop:"tanslateLanguage"},{default:d((()=>[u(k,{clearable:"",modelValue:e.tanslateLanguage,"onUpdate:modelValue":l=>e.tanslateLanguage=l,placeholder:"翻译语言",filterable:""},{default:d((()=>[(s(!0),o(i,null,v(D.value,((e,l)=>(s(),g(V,{key:l,value:e.code,label:`[${e.code}] ${e.name}`},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)):b("",!0)])),_:2},1024)])),_:2},1024),r("div",S,[u(P,{onClick:F},{default:d((()=>[n("删除")])),_:1})])])))),128)),u(T,{gutter:35},{default:d((()=>[u(h,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:d((()=>[r("div",$,[u(P,{onClick:E},{default:d((()=>[n("添加处理")])),_:1})])])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-dc0be68a"]]),q=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));export{q as a,U as d,O as e,w as p,T as r};
