import{_ as e}from"./index.vue_vue_type_script_setup_true_name_iconSelector_lang-Bt5ZQH5T.js";import{g as l,r as a,o as t}from"./index-DWGcUZYU.js";import{S as o}from"./sys-code-gen-api-BI7DgiUl.js";import{S as r}from"./sys-dict-data-api-Dup6m-Lx.js";import{S as s}from"./sys-print-api-DvOEPwCj.js";import{d as u,r as m,_ as i,j as d,k as n,ah as p,o as c,c as b,V as g,P as f,a as v,U as y,T as _,F as j,a8 as F,S as V,O as h}from"./@vue-CX_mlhJe.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./jspdf-CH-AZmyM.js";import"./@babel-Q_QrznUx.js";import"./fflate-B3Xb404m.js";import"./@element-plus-BOmeTCVz.js";import"./pinia-CUaEdNPK.js";import"./vue-demi-DMxTsK9-.js";import"./vue-DMOwXDUL.js";import"./vue-router-DCQgfElv.js";import"./vue-i18n-DOLUIXgH.js";import"./@intlify-8Jop7_C0.js";import"./js-cookie-BXEMiIsG.js";import"./nprogress-BXoedg-7.js";import"./axios-CURSphCx.js";import"./element-plus-B9gGnqkL.js";import"./lodash-es-Bx2dc0Qf.js";import"./@vueuse-DXufPiA3.js";import"./@sxzz-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-DCN6noHZ.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DHjS97uh.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-DUD0Qdrs.js";import"./vform3-builds-n_pM9nIF.js";import"./vue-signature-pad-lyh4QR3Z.js";import"./signature_pad-edH0THtw.js";import"./merge-images-Cwm9rL5U.js";import"./vue3-tree-org-BzkJto3m.js";/* empty css                    */import"./vue-plugin-hiprint-DZDwPE-S.js";import"./jquery-VSNIoD5U.js";import"./jsbarcode-BgYCXnWS.js";import"./socket.io-client-Czs-wWz3.js";import"./engine.io-client-CYjl6Vq_.js";import"./engine.io-parser-BcOgFIoq.js";import"./@socket.io-mcuM6LAc.js";import"./debug-CmirTkX5.js";import"./ms-CufoL-nS.js";import"./socket.io-parser-CnrqkM7d.js";import"./canvg-FiHv1N34.js";import"./core-js-BJmvCVxN.js";import"./raf-B8RiLMb0.js";import"./performance-now-D4QiMMAM.js";import"./rgbcolor-Cv9DR9SS.js";import"./svg-pathdata-BQypvdxQ.js";import"./stackblur-canvas-WbqePTkn.js";const S={class:"sys-editCodeGen-container"},D={style:{color:"#fff"}},w={key:0},T={class:"dialog-footer"},N=u({name:"sysEditCodeGen"}),k=x(u({...N,props:{title:String,applicationNamespaces:Array},emits:["handleQuery"],setup(u,{expose:x,emit:N}){const k=u,C=N,G=m(),U=i({isShowDialog:!1,ruleForm:{},tableData:[],dbData:[],menuData:[],codeGenTypeList:[],printTypeList:[],printList:[]});d((async()=>{var e,t=await l(o).apiSysCodeGenDatabaseListGet();U.dbData=t.data.result;let u=await l(a).apiSysMenuListGet();U.menuData=u.data.result??[];let m=await l(r).apiSysDictDataDataListCodeGet("code_gen_create_type");U.codeGenTypeList=m.data.result;let i=await l(r).apiSysDictDataDataListCodeGet("code_gen_print_type");U.printTypeList=i.data.result;let d=await l(s).apiSysPrintPagePost();U.printList=(null==(e=d.data.result)?void 0:e.items)??[]}));const L=e=>{U.ruleForm.tableName=e.entityName,U.ruleForm.busName=e.tableComment},I=e=>{},P=()=>{""!==U.ruleForm.printType&&"off"==U.ruleForm.printType&&(U.ruleForm.printName="")},O=n((()=>t.globalComponentSize())),q=()=>{U.isShowDialog=!1},z=()=>{G.value.validate((async e=>{e&&(null!=U.ruleForm.id&&U.ruleForm.id>0?await l(o).apiSysCodeGenUpdatePost(U.ruleForm):await l(o).apiSysCodeGenAddPost(U.ruleForm),C("handleQuery"),U.isShowDialog=!1)}))};return x({openDialog:e=>{var l;U.ruleForm=JSON.parse(JSON.stringify(e)),U.isShowDialog=!0,null==(l=G.value)||l.resetFields()}}),(a,t)=>{const r=p("ele-Edit"),s=p("el-icon"),u=p("el-option"),m=p("el-select"),i=p("el-form-item"),d=p("el-col"),n=p("el-input"),x=p("el-radio"),N=p("el-radio-group"),C=p("el-cascader"),M=p("el-row"),B=p("el-form"),Q=p("el-button"),A=p("el-dialog");return c(),b("div",S,[g(A,{modelValue:U.isShowDialog,"onUpdate:modelValue":t[15]||(t[15]=e=>U.isShowDialog=e),draggable:"","close-on-click-modal":!1,width:"700px"},{header:f((()=>[v("div",D,[g(s,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:f((()=>[g(r)])),_:1}),v("span",null,y(k.title),1)])])),footer:f((()=>[v("span",T,[g(Q,{onClick:q},{default:f((()=>[_("取 消")])),_:1}),g(Q,{type:"primary",onClick:z},{default:f((()=>[_("确 定")])),_:1})])])),default:f((()=>[g(B,{model:U.ruleForm,ref_key:"ruleFormRef",ref:G,"label-width":"auto"},{default:f((()=>[g(M,{gutter:35},{default:f((()=>[g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"库定位器",prop:"configId"},{default:f((()=>[g(m,{modelValue:U.ruleForm.configId,"onUpdate:modelValue":t[0]||(t[0]=e=>U.ruleForm.configId=e),placeholder:"库名",filterable:"",onChange:t[1]||(t[1]=e=>(async()=>{if(""===U.ruleForm.configId)return;let e=await l(o).apiSysCodeGenTableListConfigIdGet(U.ruleForm.configId);U.tableData=e.data.result??[];let a=U.dbData.filter((e=>e.configId==U.ruleForm.configId));U.ruleForm.connectionString=a[0].connectionString,U.ruleForm.dbType=a[0].dbType.toString()})()),class:"w100"},{default:f((()=>[(c(!0),b(j,null,F(U.dbData,(e=>(c(),h(u,{key:e.configId,label:e.configId,value:e.configId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"库类型",prop:"dbType",rules:[{required:!0,message:"描述不能为空",trigger:"blur"}]},{default:f((()=>[g(m,{modelValue:U.ruleForm.dbType,"onUpdate:modelValue":t[2]||(t[2]=e=>U.ruleForm.dbType=e),placeholder:"数据库类型",clearable:"",disabled:"",class:"w100"},{default:f((()=>[g(u,{label:"MySql",value:"0"}),g(u,{label:"SqlServer",value:"1"}),g(u,{label:"Sqlite",value:"2"}),g(u,{label:"Oracle",value:"3"}),g(u,{label:"PostgreSQL",value:"4"}),g(u,{label:"Dm",value:"5"}),g(u,{label:"Kdbndp",value:"6"}),g(u,{label:"Oscar",value:"7"}),g(u,{label:"MySqlConnector",value:"8"}),g(u,{label:"Access",value:"9"}),g(u,{label:"OpenGauss",value:"10"}),g(u,{label:"QuestDB",value:"11"}),g(u,{label:"HG",value:"12"}),g(u,{label:"ClickHouse",value:"13"}),g(u,{label:"GBase",value:"14"}),g(u,{label:"Odbc",value:"15"}),g(u,{label:"OceanBaseForOracle",value:"16"}),g(u,{label:"TDengine",value:"17"}),g(u,{label:"GaussDB",value:"18"}),g(u,{label:"OceanBase",value:"19"}),g(u,{label:"Tidb",value:"20"}),g(u,{label:"Vastbase",value:"21"}),g(u,{label:"PolarDB",value:"22"}),g(u,{label:"Doris",value:"23"}),g(u,{label:"Custom",value:"900"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:f((()=>[g(i,{label:"库地址",prop:"connectionString"},{default:f((()=>[g(n,{modelValue:U.ruleForm.connectionString,"onUpdate:modelValue":t[3]||(t[3]=e=>U.ruleForm.connectionString=e),disabled:"",clearable:"",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"生成表",prop:"tableName",rules:[{required:!0,message:"生成表不能为空",trigger:"blur"}]},{default:f((()=>[g(m,{modelValue:U.ruleForm.tableName,"onUpdate:modelValue":t[4]||(t[4]=e=>U.ruleForm.tableName=e),onChange:L,"value-key":"value",filterable:"",clearable:"",class:"w100"},{default:f((()=>[(c(!0),b(j,null,F(U.tableData,(e=>(c(),h(u,{key:e.entityName,label:e.entityName+" ( "+e.tableName+" ) ["+e.tableComment+"]",value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"业务名",prop:"busName"},{default:f((()=>[g(n,{modelValue:U.ruleForm.busName,"onUpdate:modelValue":t[5]||(t[5]=e=>U.ruleForm.busName=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"生成菜单",prop:"generateMenu"},{default:f((()=>[g(N,{modelValue:U.ruleForm.generateMenu,"onUpdate:modelValue":t[6]||(t[6]=e=>U.ruleForm.generateMenu=e)},{default:f((()=>[g(x,{value:!0},{default:f((()=>[_("是")])),_:1}),g(x,{value:!1},{default:f((()=>[_("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"菜单图标",prop:"menuIcon"},{default:f((()=>[g(e,{modelValue:U.ruleForm.menuIcon,"onUpdate:modelValue":t[7]||(t[7]=e=>U.ruleForm.menuIcon=e),size:O.value,placeholder:"菜单图标",type:"all"},null,8,["modelValue","size"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"父级菜单",prop:"menuPid"},{default:f((()=>[g(C,{options:U.menuData,props:{checkStrictly:!0,emitPath:!1,value:"id",label:"title"},placeholder:"请选择上级菜单",disabled:!U.ruleForm.generateMenu,clearable:"",class:"w100",modelValue:U.ruleForm.menuPid,"onUpdate:modelValue":t[8]||(t[8]=e=>U.ruleForm.menuPid=e),onChange:I},{default:f((({node:e,data:l})=>[v("span",null,y(l.title),1),e.isLeaf?V("",!0):(c(),b("span",w," ("+y(l.children.length)+") ",1))])),_:1},8,["options","disabled","modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"命名空间",prop:"nameSpace",rules:[{required:!0,message:"请选择命名空间",trigger:"blur"}]},{default:f((()=>[g(m,{modelValue:U.ruleForm.nameSpace,"onUpdate:modelValue":t[9]||(t[9]=e=>U.ruleForm.nameSpace=e),filterable:"",clearable:"",class:"w100",placeholder:"命名空间"},{default:f((()=>[(c(!0),b(j,null,F(k.applicationNamespaces,((e,l)=>(c(),h(u,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"前端目录",prop:"pagePath"},{default:f((()=>[g(n,{modelValue:U.ruleForm.pagePath,"onUpdate:modelValue":t[10]||(t[10]=e=>U.ruleForm.pagePath=e),clearable:"",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"作者姓名",prop:"authorName"},{default:f((()=>[g(n,{modelValue:U.ruleForm.authorName,"onUpdate:modelValue":t[11]||(t[11]=e=>U.ruleForm.authorName=e),clearable:"",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"生成方式",prop:"generateType"},{default:f((()=>[g(m,{modelValue:U.ruleForm.generateType,"onUpdate:modelValue":t[12]||(t[12]=e=>U.ruleForm.generateType=e),filterable:"",class:"w100"},{default:f((()=>[(c(!0),b(j,null,F(U.codeGenTypeList,(e=>(c(),h(u,{key:e.value,label:e.value,value:e.code},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),g(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"支持打印",prop:"printType"},{default:f((()=>[g(m,{modelValue:U.ruleForm.printType,"onUpdate:modelValue":t[13]||(t[13]=e=>U.ruleForm.printType=e),filterable:"",class:"w100",onChange:P},{default:f((()=>[(c(!0),b(j,null,F(U.printTypeList,(e=>(c(),h(u,{key:e.value,label:e.value,value:e.code},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),"custom"==U.ruleForm.printType?(c(),h(d,{key:0,xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:f((()=>[g(i,{label:"打印模版",prop:"printName"},{default:f((()=>[g(m,{modelValue:U.ruleForm.printName,"onUpdate:modelValue":t[14]||(t[14]=e=>U.ruleForm.printName=e),filterable:"",class:"w100"},{default:f((()=>[(c(!0),b(j,null,F(U.printList,(e=>(c(),h(u,{key:e.id,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})):V("",!0)])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-a9f1bb1b"]]);export{k as default};
