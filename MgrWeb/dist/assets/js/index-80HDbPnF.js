import{d as e,r as a,_ as t,j as s,ah as r,Q as i,W as o,o as n,c,a as l,J as h,S as p,U as y,I as u,O as d,K as m,n as f,ap as g,V as w,P as x,u as K,T as S,bm as k,bk as j}from"./@vue-CX_mlhJe.js";import{_ as P}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{S as v}from"./vue-json-pretty-C2Gqq-RF.js";import{B as C,j as b,R as T,g as R}from"./index-DWGcUZYU.js";import{a as L}from"./axios-CURSphCx.js";import{d as B,E as D,c as G}from"./element-plus-B9gGnqkL.js";import"./pinia-CUaEdNPK.js";import"./vue-demi-DMxTsK9-.js";import"./vue-DMOwXDUL.js";import"./@babel-Q_QrznUx.js";import"./jspdf-CH-AZmyM.js";import"./fflate-B3Xb404m.js";import"./vue-router-DCQgfElv.js";import"./vue-i18n-DOLUIXgH.js";import"./@intlify-8Jop7_C0.js";import"./js-cookie-BXEMiIsG.js";import"./@element-plus-BOmeTCVz.js";import"./nprogress-BXoedg-7.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-DUD0Qdrs.js";import"./vform3-builds-n_pM9nIF.js";import"./vue-signature-pad-lyh4QR3Z.js";import"./signature_pad-edH0THtw.js";import"./merge-images-Cwm9rL5U.js";import"./vue3-tree-org-BzkJto3m.js";/* empty css                    */import"./vue-plugin-hiprint-DZDwPE-S.js";import"./jquery-VSNIoD5U.js";import"./jsbarcode-BgYCXnWS.js";import"./socket.io-client-Czs-wWz3.js";import"./engine.io-client-CYjl6Vq_.js";import"./engine.io-parser-BcOgFIoq.js";import"./@socket.io-mcuM6LAc.js";import"./debug-CmirTkX5.js";import"./ms-CufoL-nS.js";import"./socket.io-parser-CnrqkM7d.js";import"./canvg-FiHv1N34.js";import"./core-js-BJmvCVxN.js";import"./raf-B8RiLMb0.js";import"./performance-now-D4QiMMAM.js";import"./rgbcolor-Cv9DR9SS.js";import"./svg-pathdata-BQypvdxQ.js";import"./stackblur-canvas-WbqePTkn.js";import"./lodash-es-Bx2dc0Qf.js";import"./@vueuse-DXufPiA3.js";import"./@sxzz-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-DCN6noHZ.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DHjS97uh.js";const U=function(e){return{apiSysCacheDeleteByPreKeyPrefixKeyPost:async(a,t={})=>{if(null==a)throw new T("prefixKey","Required parameter prefixKey was null or undefined when calling apiSysCacheDeleteByPreKeyPrefixKeyPost.");const s="/api/sysCache/deleteByPreKey/{prefixKey}".replace("{prefixKey}",encodeURIComponent(String(a))),r=new URL(s,"https://example.com");let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...t},n={},c={};if(e&&e.accessToken){const a="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;n.Authorization="Bearer "+a}const l=new URLSearchParams(r.search);for(const e in c)l.set(e,c[e]);for(const e in t.params)l.set(e,t.params[e]);r.search=new URLSearchParams(l).toString();let h=i&&i.headers?i.headers:{};return o.headers={...n,...h,...t.headers},{url:r.pathname+r.search+r.hash,options:o}},apiSysCacheDeleteKeyPost:async(a,t={})=>{if(null==a)throw new T("key","Required parameter key was null or undefined when calling apiSysCacheDeleteKeyPost.");const s="/api/sysCache/delete/{key}".replace("{key}",encodeURIComponent(String(a))),r=new URL(s,"https://example.com");let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...t},n={},c={};if(e&&e.accessToken){const a="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;n.Authorization="Bearer "+a}const l=new URLSearchParams(r.search);for(const e in c)l.set(e,c[e]);for(const e in t.params)l.set(e,t.params[e]);r.search=new URLSearchParams(l).toString();let h=i&&i.headers?i.headers:{};return o.headers={...n,...h,...t.headers},{url:r.pathname+r.search+r.hash,options:o}},apiSysCacheKeyListGet:async(a={})=>{const t=new URL("/api/sysCache/keyList","https://example.com");let s;e&&(s=e.baseOptions);const r={method:"GET",...s,...a},i={},o={};if(e&&e.accessToken){const a="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;i.Authorization="Bearer "+a}const n=new URLSearchParams(t.search);for(const e in o)n.set(e,o[e]);for(const e in a.params)n.set(e,a.params[e]);t.search=new URLSearchParams(n).toString();let c=s&&s.headers?s.headers:{};return r.headers={...i,...c,...a.headers},{url:t.pathname+t.search+t.hash,options:r}},apiSysCacheKeysByPrefixKeyPrefixKeyGet:async(a,t={})=>{if(null==a)throw new T("prefixKey","Required parameter prefixKey was null or undefined when calling apiSysCacheKeysByPrefixKeyPrefixKeyGet.");const s="/api/sysCache/keysByPrefixKey/{prefixKey}".replace("{prefixKey}",encodeURIComponent(String(a))),r=new URL(s,"https://example.com");let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...t},n={},c={};if(e&&e.accessToken){const a="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;n.Authorization="Bearer "+a}const l=new URLSearchParams(r.search);for(const e in c)l.set(e,c[e]);for(const e in t.params)l.set(e,t.params[e]);r.search=new URLSearchParams(l).toString();let h=i&&i.headers?i.headers:{};return o.headers={...n,...h,...t.headers},{url:r.pathname+r.search+r.hash,options:o}},apiSysCacheValueKeyGet:async(a,t={})=>{if(null==a)throw new T("key","Required parameter key was null or undefined when calling apiSysCacheValueKeyGet.");const s="/api/sysCache/value/{key}".replace("{key}",encodeURIComponent(String(a))),r=new URL(s,"https://example.com");let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...t},n={},c={};if(e&&e.accessToken){const a="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;n.Authorization="Bearer "+a}const l=new URLSearchParams(r.search);for(const e in c)l.set(e,c[e]);for(const e in t.params)l.set(e,t.params[e]);r.search=new URLSearchParams(l).toString();let h=i&&i.headers?i.headers:{};return o.headers={...n,...h,...t.headers},{url:r.pathname+r.search+r.hash,options:o}}}},O=function(e){return{async apiSysCacheDeleteByPreKeyPrefixKeyPost(a,t){const s=await U(e).apiSysCacheDeleteByPreKeyPrefixKeyPost(a,t);return(e=L,a=b)=>{const t={...s.options,url:a+s.url};return e.request(t)}},async apiSysCacheDeleteKeyPost(a,t){const s=await U(e).apiSysCacheDeleteKeyPost(a,t);return(e=L,a=b)=>{const t={...s.options,url:a+s.url};return e.request(t)}},async apiSysCacheKeyListGet(a){const t=await U(e).apiSysCacheKeyListGet(a);return(e=L,a=b)=>{const s={...t.options,url:a+t.url};return e.request(s)}},async apiSysCacheKeysByPrefixKeyPrefixKeyGet(a,t){const s=await U(e).apiSysCacheKeysByPrefixKeyPrefixKeyGet(a,t);return(e=L,a=b)=>{const t={...s.options,url:a+s.url};return e.request(t)}},async apiSysCacheValueKeyGet(a,t){const s=await U(e).apiSysCacheValueKeyGet(a,t);return(e=L,a=b)=>{const t={...s.options,url:a+s.url};return e.request(t)}}}};class _ extends C{async apiSysCacheDeleteByPreKeyPrefixKeyPost(e,a){return O(this.configuration).apiSysCacheDeleteByPreKeyPrefixKeyPost(e,a).then((e=>e(this.axios,this.basePath)))}async apiSysCacheDeleteKeyPost(e,a){return O(this.configuration).apiSysCacheDeleteKeyPost(e,a).then((e=>e(this.axios,this.basePath)))}async apiSysCacheKeyListGet(e){return O(this.configuration).apiSysCacheKeyListGet(e).then((e=>e(this.axios,this.basePath)))}async apiSysCacheKeysByPrefixKeyPrefixKeyGet(e,a){return O(this.configuration).apiSysCacheKeysByPrefixKeyPrefixKeyGet(e,a).then((e=>e(this.axios,this.basePath)))}async apiSysCacheValueKeyGet(e,a){return O(this.configuration).apiSysCacheValueKeyGet(e,a).then((e=>e(this.axios,this.basePath)))}}const I={key:1,class:"notice-bar-warp-slot"},V=e({name:"noticeBar"}),z=P(e({...V,props:{mode:{type:String,default:()=>""},text:{type:String,default:()=>""},color:{type:String,default:()=>"var(--el-color-warning)"},background:{type:String,default:()=>"var(--el-color-warning-light-9)"},size:{type:[Number,String],default:()=>14},height:{type:Number,default:()=>40},delay:{type:Number,default:()=>1},speed:{type:Number,default:()=>100},scrollable:{type:Boolean,default:()=>!1},leftIcon:{type:String,default:()=>""},rightIcon:{type:String,default:()=>""}},emits:["close","link"],setup(e,{emit:g}){const w=e,x=g,K=a(),S=a(),k=t({order:1,oneTime:0,twoTime:0,warpOWidth:0,textOWidth:0,isMode:!1}),j=()=>{k.oneTime=k.textOWidth/w.speed,k.twoTime=(k.textOWidth+k.warpOWidth)/w.speed},P=()=>{1===k.order?(S.value.style.cssText=`animation: oneAnimation ${k.oneTime}s linear; opactity: 1;}`,k.order=2):S.value.style.cssText=`animation: twoAnimation ${k.twoTime}s linear infinite; opacity: 1;`},v=()=>{if(!w.mode)return!1;"closeable"===w.mode?(k.isMode=!0,x("close")):"link"===w.mode&&x("link")};return s((()=>{if(w.scrollable)return!1;f((()=>{k.warpOWidth=K.value.offsetWidth,k.textOWidth=S.value.offsetWidth,document.styleSheets[0].insertRule(`@keyframes oneAnimation {0% {left: 0px;} 100% {left: -${k.textOWidth}px;}}`),document.styleSheets[0].insertRule(`@keyframes twoAnimation {0% {left: ${k.warpOWidth}px;} 100% {left: -${k.textOWidth}px;}}`),j(),setTimeout((()=>{P()}),1e3*w.delay)})),S.value.addEventListener("animationend",(()=>{P()}),!1)})),(a,t)=>{const s=r("SvgIcon");return i((n(),c("div",{class:"notice-bar",style:m({background:e.background,height:`${e.height}px`})},[l("div",{class:"notice-bar-warp",style:m({color:e.color,fontSize:`${e.size}px`})},[e.leftIcon?(n(),c("i",{key:0,class:h(["notice-bar-warp-left-icon",e.leftIcon])},null,2)):p("",!0),l("div",{class:"notice-bar-warp-text-box",ref_key:"noticeBarWarpRef",ref:K},[e.scrollable?(n(),c("div",I,[u(a.$slots,"default",{},void 0,!0)])):(n(),c("div",{key:0,class:"notice-bar-warp-text",ref_key:"noticeBarTextRef",ref:S},y(e.text),513))],512),e.rightIcon?(n(),d(s,{key:1,name:e.rightIcon,class:"notice-bar-warp-right-icon",onClick:v},null,8,["name"])):p("",!0)],4)],4)),[[o,!k.isMode]])}}}),[["__scopeId","data-v-eaf205fb"]]),W={class:"sys-cache-container"},q={class:"card-header"},$=(e=>(k("data-v-93efec92"),e=e(),j(),e))((()=>l("span",null,"缓存列表",-1))),A={class:"card-header"},N=e({name:"sysCache"}),E=P(e({...N,setup(e){const o=a(),h=a({}),p=t({loading:!1,loading1:!1,cacheData:[],cacheValue:void 0,cacheKey:void 0});s((async()=>{u()}));const u=async()=>{p.cacheData=[],p.cacheValue=void 0,p.cacheKey=void 0,p.loading=!0;let e=(await R(_).apiSysCacheKeyListGet()).data.result;for(let a=0;a<e.length;a++){let t=e[a].split(":"),s=t[0];if(0===p.cacheData.filter((e=>e.name==s)).length&&p.cacheData.push({id:t.length>1?0:e[a],name:s,children:[]}),t.length>1){(p.cacheData.filter((e=>e.name==s))[0]||{}).children.push({id:e[a],name:e[a].substr(s.length+1)})}}p.loading=!1},m=()=>{0!=h.value.id?G.confirm(`确定删除缓存：【${h.value.id}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await R(_).apiSysCacheDeleteKeyPost(h.value.id),u(),p.cacheValue=void 0,p.cacheKey=void 0,D.success("删除成功")})).catch((()=>{})):D.warning("禁止删除顶层缓存")},f=async e=>{if(0!=e.id){h.value=e,p.loading1=!0;var a=(await R(_).apiSysCacheValueKeyGet(e.id)).data.result;if("string"==typeof a)try{var t=JSON.parse(a);p.cacheValue="object"==typeof t?t:a}catch(s){p.cacheValue=a}else p.cacheValue=a;p.cacheKey=e.id,p.loading1=!1}};return(e,a)=>{const t=r("el-button"),s=r("el-card"),h=r("el-col"),k=r("el-row"),j=g("auth"),P=g("loading");return n(),c("div",W,[w(z,{text:"系统缓存数据管理，请慎重操作！",leftIcon:"iconfont icon-tongzhi2",background:"var(--el-color-primary-light-9)",color:"var(--el-color-primary)"}),w(k,{gutter:8,style:{width:"100%"}},{default:x((()=>[w(h,{span:8,xs:24},{default:x((()=>[i((n(),d(s,{shadow:"hover",header:"缓存列表",class:"mt8"},{header:x((()=>[l("div",q,[$,i(w(t,{icon:"ele-Refresh",size:"small",circle:"",text:"",onClick:u},null,512),[[j,"sysCache:keyList"]])])])),default:x((()=>[w(K(B),{ref_key:"treeRef",ref:o,class:"filter-tree",data:p.cacheData,"node-key":"id",props:{children:"children",label:"name"},onNodeClick:f,"default-checked-keys":p.cacheData,"highlight-current":"","check-strictly":"","default-expand-all":"",accordion:""},null,8,["data","default-checked-keys"])])),_:1})),[[P,p.loading]])])),_:1}),w(h,{span:16,xs:24},{default:x((()=>[i((n(),d(s,{shadow:"hover",header:"缓存数据",class:"mt8"},{header:x((()=>[l("div",A,[l("span",null,y("缓存数据"+(p.cacheKey?`【${p.cacheKey}】`:"")),1),i((n(),d(t,{icon:"ele-Delete",size:"small",type:"danger",onClick:m},{default:x((()=>[S(" 删除缓存 ")])),_:1})),[[j,"sysCache:delete"]])])])),default:x((()=>[w(K(v),{data:p.cacheValue,showLength:"",showIcon:"",showLineNumber:"",showSelectController:""},null,8,["data"])])),_:1})),[[P,p.loading1]])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-93efec92"]]);export{E as default};
