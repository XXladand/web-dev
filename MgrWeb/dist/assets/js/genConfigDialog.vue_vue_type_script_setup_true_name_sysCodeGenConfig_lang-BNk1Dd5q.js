import{B as e,j as a,R as o,g as t,s as n,t as i,e as s}from"./index-DWGcUZYU.js";import{_ as l}from"./fkDialog.vue_vue_type_script_setup_true_name_sysCodeGenFk_lang-C5HbOnKA.js";import{_ as r}from"./treeDialog.vue_vue_type_script_setup_true_name_sysCodeGenTree_lang-CZNqVJ28.js";import{a as d}from"./axios-CURSphCx.js";import{S as u}from"./sys-dict-data-api-Dup6m-Lx.js";import{d as c,r as p,_ as m,j as h,Z as y,ah as f,ap as w,o as v,c as C,V as T,P as S,a as g,T as b,Q as L,O as G,F as k,a8 as D}from"./@vue-CX_mlhJe.js";const U=function(e){return{apiSysCodeGenConfigDetailGet:async(a,o,t,n,i,s,l,r,d,u,c,p,m,h,y,f,w,v,C,T,S,g,b,L,G,k,D,U,_,E,V,N,R={})=>{const P=new URL("/api/sysCodeGenConfig/detail","https://example.com");let x;e&&(x=e.baseOptions);const q={method:"GET",...x,...R},F={},W={};if(e&&e.accessToken){const a="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;F.Authorization="Bearer "+a}void 0!==a&&(W.Id=a),void 0!==o&&(W.CodeGenId=o),void 0!==t&&(W.ColumnName=t),void 0!==n&&(W.PropertyName=n),void 0!==i&&(W.ColumnLength=i),void 0!==s&&(W.LowerPropertyName=s),void 0!==l&&(W.ColumnComment=l),void 0!==r&&(W.NetType=r),void 0!==d&&(W.EffectType=d),void 0!==u&&(W.FkEntityName=u),void 0!==c&&(W.FkTableName=c),void 0!==p&&(W.LowerFkEntityName=p),void 0!==m&&(W.FkColumnName=m),void 0!==h&&(W.FkLinkColumnName=h),void 0!==y&&(W.LowerFkColumnName=y),void 0!==f&&(W.FkColumnNetType=f),void 0!==w&&(W.DictTypeCode=w),void 0!==v&&(W.WhetherRetract=v),void 0!==C&&(W.WhetherRequired=C),void 0!==T&&(W.WhetherSortable=T),void 0!==S&&(W.QueryWhether=S),void 0!==g&&(W.QueryType=g),void 0!==b&&(W.WhetherTable=b),void 0!==L&&(W.WhetherAddUpdate=L),void 0!==G&&(W.ColumnKey=G),void 0!==k&&(W.DataType=k),void 0!==D&&(W.WhetherCommon=D),void 0!==U&&(W.TableNickName=U),void 0!==_&&(W.DisplayColumn=_),void 0!==E&&(W.ValueColumn=E),void 0!==V&&(W.PidColumn=V),void 0!==N&&(W.OrderNo=N);const A=new URLSearchParams(P.search);for(const e in W)A.set(e,W[e]);for(const e in R.params)A.set(e,R.params[e]);P.search=new URLSearchParams(A).toString();let j=x&&x.headers?x.headers:{};return q.headers={...F,...j,...R.headers},{url:P.pathname+P.search+P.hash,options:q}},apiSysCodeGenConfigListGet:async(a,o,t,n,i,s,l,r,d,u,c,p,m,h,y,f,w,v,C,T,S,g,b,L,G,k,D,U,_,E,V,N,R={})=>{const P=new URL("/api/sysCodeGenConfig/list","https://example.com");let x;e&&(x=e.baseOptions);const q={method:"GET",...x,...R},F={},W={};if(e&&e.accessToken){const a="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;F.Authorization="Bearer "+a}void 0!==a&&(W.Id=a),void 0!==o&&(W.CodeGenId=o),void 0!==t&&(W.ColumnName=t),void 0!==n&&(W.PropertyName=n),void 0!==i&&(W.ColumnLength=i),void 0!==s&&(W.LowerPropertyName=s),void 0!==l&&(W.ColumnComment=l),void 0!==r&&(W.NetType=r),void 0!==d&&(W.EffectType=d),void 0!==u&&(W.FkEntityName=u),void 0!==c&&(W.FkTableName=c),void 0!==p&&(W.LowerFkEntityName=p),void 0!==m&&(W.FkColumnName=m),void 0!==h&&(W.FkLinkColumnName=h),void 0!==y&&(W.LowerFkColumnName=y),void 0!==f&&(W.FkColumnNetType=f),void 0!==w&&(W.DictTypeCode=w),void 0!==v&&(W.WhetherRetract=v),void 0!==C&&(W.WhetherRequired=C),void 0!==T&&(W.WhetherSortable=T),void 0!==S&&(W.QueryWhether=S),void 0!==g&&(W.QueryType=g),void 0!==b&&(W.WhetherTable=b),void 0!==L&&(W.WhetherAddUpdate=L),void 0!==G&&(W.ColumnKey=G),void 0!==k&&(W.DataType=k),void 0!==D&&(W.WhetherCommon=D),void 0!==U&&(W.TableNickName=U),void 0!==_&&(W.DisplayColumn=_),void 0!==E&&(W.ValueColumn=E),void 0!==V&&(W.PidColumn=V),void 0!==N&&(W.OrderNo=N);const A=new URLSearchParams(P.search);for(const e in W)A.set(e,W[e]);for(const e in R.params)A.set(e,R.params[e]);P.search=new URLSearchParams(A).toString();let j=x&&x.headers?x.headers:{};return q.headers={...F,...j,...R.headers},{url:P.pathname+P.search+P.hash,options:q}},apiSysCodeGenConfigUpdatePost:async(a,o={})=>{const t=new URL("/api/sysCodeGenConfig/update","https://example.com");let n;e&&(n=e.baseOptions);const i={method:"POST",...n,...o},s={},l={};if(e&&e.accessToken){const a="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;s.Authorization="Bearer "+a}s["Content-Type"]="application/json-patch+json";const r=new URLSearchParams(t.search);for(const e in l)r.set(e,l[e]);for(const e in o.params)r.set(e,o.params[e]);t.search=new URLSearchParams(r).toString();let d=n&&n.headers?n.headers:{};i.headers={...s,...d,...o.headers};const u="string"!=typeof a||"application/json"===i.headers["Content-Type"];return i.data=u?JSON.stringify(void 0!==a?a:{}):a||"",{url:t.pathname+t.search+t.hash,options:i}}}},_=function(e){return{async apiSysCodeGenConfigDetailGet(o,t,n,i,s,l,r,u,c,p,m,h,y,f,w,v,C,T,S,g,b,L,G,k,D,_,E,V,N,R,P,x,q){const F=await U(e).apiSysCodeGenConfigDetailGet(o,t,n,i,s,l,r,u,c,p,m,h,y,f,w,v,C,T,S,g,b,L,G,k,D,_,E,V,N,R,P,x,q);return(e=d,o=a)=>{const t={...F.options,url:o+F.url};return e.request(t)}},async apiSysCodeGenConfigListGet(o,t,n,i,s,l,r,u,c,p,m,h,y,f,w,v,C,T,S,g,b,L,G,k,D,_,E,V,N,R,P,x,q){const F=await U(e).apiSysCodeGenConfigListGet(o,t,n,i,s,l,r,u,c,p,m,h,y,f,w,v,C,T,S,g,b,L,G,k,D,_,E,V,N,R,P,x,q);return(e=d,o=a)=>{const t={...F.options,url:o+F.url};return e.request(t)}},async apiSysCodeGenConfigUpdatePost(o,t){const n=await U(e).apiSysCodeGenConfigUpdatePost(o,t);return(e=d,o=a)=>{const t={...n.options,url:o+n.url};return e.request(t)}}}};class E extends e{async apiSysCodeGenConfigDetailGet(e,a,o,t,n,i,s,l,r,d,u,c,p,m,h,y,f,w,v,C,T,S,g,b,L,G,k,D,U,E,V,N,R){return _(this.configuration).apiSysCodeGenConfigDetailGet(e,a,o,t,n,i,s,l,r,d,u,c,p,m,h,y,f,w,v,C,T,S,g,b,L,G,k,D,U,E,V,N,R).then((e=>e(this.axios,this.basePath)))}async apiSysCodeGenConfigListGet(e,a,o,t,n,i,s,l,r,d,u,c,p,m,h,y,f,w,v,C,T,S,g,b,L,G,k,D,U,E,V,N,R){return _(this.configuration).apiSysCodeGenConfigListGet(e,a,o,t,n,i,s,l,r,d,u,c,p,m,h,y,f,w,v,C,T,S,g,b,L,G,k,D,U,E,V,N,R).then((e=>e(this.axios,this.basePath)))}async apiSysCodeGenConfigUpdatePost(e,a){return _(this.configuration).apiSysCodeGenConfigUpdatePost(e,a).then((e=>e(this.axios,this.basePath)))}}const V=function(e){return{apiSysEnumEnumDataListGet:async(a,t={})=>{if(null==a)throw new o("enumName","Required parameter enumName was null or undefined when calling apiSysEnumEnumDataListGet.");const n=new URL("/api/sysEnum/enumDataList","https://example.com");let i;e&&(i=e.baseOptions);const s={method:"GET",...i,...t},l={},r={};if(e&&e.accessToken){const a="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;l.Authorization="Bearer "+a}void 0!==a&&(r.EnumName=a);const d=new URLSearchParams(n.search);for(const e in r)d.set(e,r[e]);for(const e in t.params)d.set(e,t.params[e]);n.search=new URLSearchParams(d).toString();let u=i&&i.headers?i.headers:{};return s.headers={...l,...u,...t.headers},{url:n.pathname+n.search+n.hash,options:s}},apiSysEnumEnumTypeListGet:async(a={})=>{const o=new URL("/api/sysEnum/enumTypeList","https://example.com");let t;e&&(t=e.baseOptions);const n={method:"GET",...t,...a},i={},s={};if(e&&e.accessToken){const a="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;i.Authorization="Bearer "+a}const l=new URLSearchParams(o.search);for(const e in s)l.set(e,s[e]);for(const e in a.params)l.set(e,a.params[e]);o.search=new URLSearchParams(l).toString();let r=t&&t.headers?t.headers:{};return n.headers={...i,...r,...a.headers},{url:o.pathname+o.search+o.hash,options:n}}}},N=function(e){return{async apiSysEnumEnumDataListGet(o,t){const n=await V(e).apiSysEnumEnumDataListGet(o,t);return(e=d,o=a)=>{const t={...n.options,url:o+n.url};return e.request(t)}},async apiSysEnumEnumTypeListGet(o){const t=await V(e).apiSysEnumEnumTypeListGet(o);return(e=d,o=a)=>{const n={...t.options,url:o+t.url};return e.request(n)}}}};class R extends e{async apiSysEnumEnumDataListGet(e,a){return N(this.configuration).apiSysEnumEnumDataListGet(e,a).then((e=>e(this.axios,this.basePath)))}async apiSysEnumEnumTypeListGet(e){return N(this.configuration).apiSysEnumEnumTypeListGet(e).then((e=>e(this.axios,this.basePath)))}}const P={class:"sys-codeGenConfig-container"},x={style:{color:"#fff"}},q=g("span",null," 生成配置 ",-1),F={class:"dialog-footer"},W=c({name:"sysCodeGenConfig"}),A=c({...W,emits:["handleQuery"],setup(e,{expose:a,emit:o}){const d=o,c=p(),U=p(),_=m({isShowDialog:!1,loading:!1,tableData:[],dbData:[],effectTypeList:[],dictTypeCodeList:[],dictDataAll:[],queryTypeList:[],allConstSelector:[],allEnumSelector:[]});h((async()=>{var e,a=await t(u).apiSysDictDataDataListCodeGet("code_gen_effect_type");_.effectTypeList=a.data.result;var o=await t(n).apiSysDictTypeListGet();_.dictTypeCodeList=o.data.result,_.dictDataAll=o.data.result;var l=await t(u).apiSysDictDataDataListCodeGet("code_gen_query_type");_.queryTypeList=l.data.result;var r=await t(i).apiSysConstListGet();_.allConstSelector=r.data.result;let d=await t(R).apiSysEnumEnumTypeListGet();_.allEnumSelector=null==(e=d.data.result)?void 0:e.map((e=>{var a;return{...e,name:`${e.typeDescribe} [${null==(a=e.typeName)?void 0:a.replace("Enum","")}]`,code:e.typeName}})),s.on("submitRefreshFk",(e=>{_.tableData[e.index]=e}))}));const V=e=>{_.tableData[e.index]=e};y((()=>{s.off("submitRefresh",(()=>{})),s.off("submitRefreshFk",(()=>{}))}));function N(e){return 1==e.whetherCommon||"True"===e.columnKey}const W=(e,a)=>{e.index=a,c.value.openDialog(e)},A=(e,a)=>{e.index=a,U.value.openDialog(e)},j=()=>{_.isShowDialog=!1},O=async()=>{_.loading=!0;var e=_.tableData;e.forEach((e=>{for(var a in e)!0===e[a]&&(e[a]="Y"),!1===e[a]&&(e[a]="N")})),await t(E).apiSysCodeGenConfigUpdatePost(e),_.loading=!1,d("handleQuery"),_.isShowDialog=!1};return a({openDialog:e=>{(async e=>{_.loading=!0;var a=(await t(E).apiSysCodeGenConfigListGet(void 0,e.id)).data.result??[];let o=["whetherTable","whetherAddUpdate","whetherRequired","whetherSortable"];a.forEach((e=>{for(const a in e)"Y"===e[a]&&(e[a]=!0),("N"===e[a]||o.includes(a)&&null===e[a])&&(e[a]=!1)})),_.tableData=a,_.loading=!1})(e),_.isShowDialog=!0}}),(e,a)=>{const o=f("ele-Edit"),t=f("el-icon"),n=f("el-table-column"),i=f("el-input"),s=f("el-option"),d=f("el-select"),u=f("el-checkbox"),p=f("el-switch"),m=f("el-table"),h=f("el-button"),y=f("el-dialog"),E=w("loading");return v(),C("div",P,[T(y,{modelValue:_.isShowDialog,"onUpdate:modelValue":a[0]||(a[0]=e=>_.isShowDialog=e),draggable:"","close-on-click-modal":!1,width:"1500px"},{header:S((()=>[g("div",x,[T(t,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:S((()=>[T(o)])),_:1}),q])])),footer:S((()=>[g("span",F,[T(h,{onClick:j},{default:S((()=>[b("取 消")])),_:1}),T(h,{type:"primary",onClick:O},{default:S((()=>[b("确 定")])),_:1})])])),default:S((()=>[L((v(),G(m,{data:_.tableData,style:{width:"100%"},border:""},{default:S((()=>[T(n,{type:"index",label:"序号",width:"55",align:"center"}),T(n,{prop:"propertyName",label:"实体属性",width:"180","show-overflow-tooltip":""}),T(n,{prop:"columnComment",label:"描述",width:"180","show-overflow-tooltip":""},{default:S((e=>[T(i,{modelValue:e.row.columnComment,"onUpdate:modelValue":a=>e.row.columnComment=a,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),T(n,{prop:"netType",label:"数据类型","min-width":"90","show-overflow-tooltip":""}),T(n,{prop:"effectType",label:"作用类型",width:"120","show-overflow-tooltip":""},{default:S((e=>[T(d,{modelValue:e.row.effectType,"onUpdate:modelValue":a=>e.row.effectType=a,class:"m-2",placeholder:"Select",disabled:N(e.row),onChange:a=>((e,a)=>{let o=e.effectType;"fk"===o?W(e,a):"ApiTreeSelect"===o?A(e,a):"Select"===o?(e.dictTypeCode="",_.dictTypeCodeList=_.dictDataAll):"ConstSelector"===o?(e.dictTypeCode="",_.dictTypeCodeList=_.allConstSelector):"EnumSelector"==o&&(e.dictTypeCode="",_.dictTypeCodeList=_.allEnumSelector)})(e.row,e.$index)},{default:S((()=>[(v(!0),C(k,null,D(_.effectTypeList,(e=>(v(),G(s,{key:e.code,label:e.value,value:e.code},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])),_:1}),T(n,{prop:"dictTypeCode",label:"字典",width:"180","show-overflow-tooltip":""},{default:S((e=>{return[T(d,{modelValue:e.row.dictTypeCode,"onUpdate:modelValue":a=>e.row.dictTypeCode=a,class:"m-2",disabled:(a=e.row,-1===["Radio","Select","Checkbox","ConstSelector","EnumSelector"].indexOf(a.effectType))},{default:S((()=>[(v(!0),C(k,null,D(_.dictTypeCodeList,(e=>(v(),G(s,{key:e.code,label:e.name,value:e.code},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])];var a})),_:1}),T(n,{prop:"whetherTable",label:"列表显示",width:"85",align:"center","show-overflow-tooltip":""},{default:S((e=>[T(u,{modelValue:e.row.whetherTable,"onUpdate:modelValue":a=>e.row.whetherTable=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),T(n,{prop:"whetherAddUpdate",label:"增改",width:"80",align:"center","show-overflow-tooltip":""},{default:S((e=>[T(u,{modelValue:e.row.whetherAddUpdate,"onUpdate:modelValue":a=>e.row.whetherAddUpdate=a,disabled:N(e.row)},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),T(n,{prop:"whetherRequired",label:"必填",width:"80",align:"center","show-overflow-tooltip":""},{default:S((e=>[T(u,{modelValue:e.row.whetherRequired,"onUpdate:modelValue":a=>e.row.whetherRequired=a,disabled:N(e.row)},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),T(n,{prop:"whetherSortable",label:"可排序",width:"80",align:"center","show-overflow-tooltip":""},{default:S((e=>[T(u,{modelValue:e.row.whetherSortable,"onUpdate:modelValue":a=>e.row.whetherSortable=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),T(n,{prop:"queryWhether",label:"是否是查询","min-width":"80",align:"center","show-overflow-tooltip":""},{default:S((e=>[T(p,{modelValue:e.row.queryWhether,"onUpdate:modelValue":a=>e.row.queryWhether=a,"active-value":!0,"inactive-value":!1},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),T(n,{prop:"queryType",label:"查询方式","min-width":"120",align:"center","show-overflow-tooltip":""},{default:S((e=>[T(d,{modelValue:e.row.queryType,"onUpdate:modelValue":a=>e.row.queryType=a,class:"m-2",placeholder:"Select",disabled:!e.row.queryWhether},{default:S((()=>[(v(!0),C(k,null,D(_.queryTypeList,(e=>(v(),G(s,{key:e.code,label:e.value,value:e.code},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),T(n,{prop:"orderNo",label:"排序",width:"100","show-overflow-tooltip":""},{default:S((e=>[T(i,{modelValue:e.row.orderNo,"onUpdate:modelValue":a=>e.row.orderNo=a,autocomplete:"off",type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])),[[E,_.loading]])])),_:1},8,["modelValue"]),T(l,{ref_key:"fkDialogRef",ref:c,onSubmitRefreshFk:V},null,512),T(r,{ref_key:"treeDialogRef",ref:U,onSubmitRefreshFk:V},null,512)])}}});export{A as _};
