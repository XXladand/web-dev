import e from"./editRole-CraxjHsn.js";import{_ as a}from"./grantData.vue_vue_type_script_setup_true_name_sysGrantData_lang-DgLbtMGW.js";import{_ as t}from"./modifyRecord.vue_vue_type_script_setup_true_lang-BJJtdc8n.js";import{g as o}from"./index-DWGcUZYU.js";import{S as l}from"./sys-role-api-CtWvDK07.js";import{c as r,E as i}from"./element-plus-B9gGnqkL.js";import{d as s,r as n,_ as p,j as m,ah as d,ap as u,o as c,c as f,V as g,P as j,Q as y,O as v,T as _,S as w}from"./@vue-CX_mlhJe.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./pinia-CUaEdNPK.js";import"./vue-demi-DMxTsK9-.js";import"./vue-DMOwXDUL.js";import"./@babel-Q_QrznUx.js";import"./jspdf-CH-AZmyM.js";import"./fflate-B3Xb404m.js";import"./vue-router-DCQgfElv.js";import"./vue-i18n-DOLUIXgH.js";import"./@intlify-8Jop7_C0.js";import"./js-cookie-BXEMiIsG.js";import"./@element-plus-BOmeTCVz.js";import"./nprogress-BXoedg-7.js";import"./axios-CURSphCx.js";import"./lodash-es-Bx2dc0Qf.js";import"./@vueuse-DXufPiA3.js";import"./@sxzz-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-DCN6noHZ.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DHjS97uh.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-DUD0Qdrs.js";import"./vform3-builds-n_pM9nIF.js";import"./vue-signature-pad-lyh4QR3Z.js";import"./signature_pad-edH0THtw.js";import"./merge-images-Cwm9rL5U.js";import"./vue3-tree-org-BzkJto3m.js";/* empty css                    */import"./vue-plugin-hiprint-DZDwPE-S.js";import"./jquery-VSNIoD5U.js";import"./jsbarcode-BgYCXnWS.js";import"./socket.io-client-Czs-wWz3.js";import"./engine.io-client-CYjl6Vq_.js";import"./engine.io-parser-BcOgFIoq.js";import"./@socket.io-mcuM6LAc.js";import"./debug-CmirTkX5.js";import"./ms-CufoL-nS.js";import"./socket.io-parser-CnrqkM7d.js";import"./canvg-FiHv1N34.js";import"./core-js-BJmvCVxN.js";import"./raf-B8RiLMb0.js";import"./performance-now-D4QiMMAM.js";import"./rgbcolor-Cv9DR9SS.js";import"./svg-pathdata-BQypvdxQ.js";import"./stackblur-canvas-WbqePTkn.js";import"./orgTree-CG-9udoW.js";import"./sys-org-api-BuTSvnhC.js";const b={class:"sys-role-container"},h=s({name:"sysRole"}),P=s({...h,setup(s){const h=n(),P=n(),k=p({loading:!1,roleData:[],queryParams:{name:void 0,code:void 0},tableParams:{page:1,pageSize:20,total:0},editRoleTitle:""});m((async()=>{await z()}));const z=async()=>{var e,a;k.loading=!0;let t=Object.assign(k.queryParams,k.tableParams),r=await o(l).apiSysRolePagePost(t);k.roleData=(null==(e=r.data.result)?void 0:e.items)??[],k.tableParams.total=null==(a=r.data.result)?void 0:a.total,k.loading=!1},R=async()=>{k.queryParams.name=void 0,k.queryParams.code=void 0,await z()},S=()=>{var e;k.editRoleTitle="添加角色",null==(e=h.value)||e.openDialog({id:void 0,status:1,orderNo:100})},x=async e=>{k.tableParams.pageSize=e,await z()},C=async e=>{k.tableParams.page=e,await z()};return(s,n)=>{const p=d("el-input"),m=d("el-form-item"),D=d("el-button"),q=d("el-button-group"),T=d("el-form"),V=d("el-card"),B=d("el-table-column"),U=d("el-tag"),Q=d("el-table"),E=d("el-pagination"),N=u("auth"),O=u("loading");return c(),f("div",b,[g(V,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:j((()=>[g(T,{model:k.queryParams,ref:"queryForm",inline:!0},{default:j((()=>[g(m,{label:"角色名称"},{default:j((()=>[g(p,{modelValue:k.queryParams.name,"onUpdate:modelValue":n[0]||(n[0]=e=>k.queryParams.name=e),placeholder:"角色名称",clearable:""},null,8,["modelValue"])])),_:1}),g(m,{label:"角色编码"},{default:j((()=>[g(p,{modelValue:k.queryParams.code,"onUpdate:modelValue":n[1]||(n[1]=e=>k.queryParams.code=e),placeholder:"角色编码",clearable:""},null,8,["modelValue"])])),_:1}),g(m,null,{default:j((()=>[g(q,null,{default:j((()=>[y((c(),v(D,{type:"primary",icon:"ele-Search",onClick:z},{default:j((()=>[_(" 查询 ")])),_:1})),[[N,"sysRole:page"]]),g(D,{icon:"ele-Refresh",onClick:R},{default:j((()=>[_(" 重置 ")])),_:1})])),_:1})])),_:1}),g(m,null,{default:j((()=>[y((c(),v(D,{type:"primary",icon:"ele-Plus",onClick:S},{default:j((()=>[_(" 新增 ")])),_:1})),[[N,"sysRole:add"]])])),_:1})])),_:1},8,["model"])])),_:1}),g(V,{class:"full-table",shadow:"hover",style:{"margin-top":"5px"}},{default:j((()=>[y((c(),v(Q,{data:k.roleData,style:{width:"100%"},border:""},{default:j((()=>[g(B,{type:"index",label:"序号",width:"55",align:"center",fixed:""}),g(B,{prop:"name",label:"角色名称",align:"center","show-overflow-tooltip":""}),g(B,{prop:"code",label:"角色编码",align:"center","show-overflow-tooltip":""}),g(B,{label:"数据范围",align:"center","show-overflow-tooltip":""},{default:j((e=>[1===e.row.dataScope?(c(),v(U,{key:0,effect:"plain"},{default:j((()=>[_("全部数据")])),_:1})):2===e.row.dataScope?(c(),v(U,{key:1,effect:"plain"},{default:j((()=>[_("本部门及以下数据")])),_:1})):3===e.row.dataScope?(c(),v(U,{key:2,effect:"plain"},{default:j((()=>[_("本部门数据")])),_:1})):4===e.row.dataScope?(c(),v(U,{key:3,effect:"plain"},{default:j((()=>[_("仅本人数据")])),_:1})):5===e.row.dataScope?(c(),v(U,{key:4,effect:"plain"},{default:j((()=>[_("自定义数据")])),_:1})):w("",!0)])),_:1}),g(B,{prop:"orderNo",label:"排序",width:"70",align:"center","show-overflow-tooltip":""}),g(B,{label:"状态",width:"70",align:"center","show-overflow-tooltip":""},{default:j((e=>[1===e.row.status?(c(),v(U,{key:0,type:"success"},{default:j((()=>[_("启用")])),_:1})):(c(),v(U,{key:1,type:"danger"},{default:j((()=>[_("禁用")])),_:1}))])),_:1}),g(B,{label:"修改记录",width:"100",align:"center","show-overflow-tooltip":""},{default:j((e=>[g(t,{data:e.row},null,8,["data"])])),_:1}),g(B,{label:"操作",width:"240",fixed:"right",align:"center","show-overflow-tooltip":""},{default:j((e=>[y((c(),v(D,{icon:"ele-OfficeBuilding",size:"small",text:"",type:"primary",onClick:a=>{return t=e.row,void(null==(o=P.value)||o.openDialog(t));var t,o}},{default:j((()=>[_(" 数据范围 ")])),_:2},1032,["onClick"])),[[N,"sysRole:grantDataScope"]]),y((c(),v(D,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:a=>(async e=>{var a;k.editRoleTitle="编辑角色",null==(a=h.value)||a.openDialog(e)})(e.row)},{default:j((()=>[_(" 编辑 ")])),_:2},1032,["onClick"])),[[N,"sysRole:update"]]),y((c(),v(D,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:a=>{return t=e.row,void r.confirm(`确定删角色：【${t.name}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await o(l).apiSysRoleDeletePost({id:t.id}),await z(),i.success("删除成功")})).catch((()=>{}));var t}},{default:j((()=>[_(" 删除 ")])),_:2},1032,["onClick"])),[[N,"sysRole:delete"]])])),_:1})])),_:1},8,["data"])),[[O,k.loading]]),g(E,{currentPage:k.tableParams.page,"onUpdate:currentPage":n[2]||(n[2]=e=>k.tableParams.page=e),"page-size":k.tableParams.pageSize,"onUpdate:pageSize":n[3]||(n[3]=e=>k.tableParams.pageSize=e),total:k.tableParams.total,"page-sizes":[10,20,50,100],size:"small",background:"",onSizeChange:x,onCurrentChange:C,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])])),_:1}),g(e,{ref_key:"editRoleRef",ref:h,title:k.editRoleTitle,onHandleQuery:z},null,8,["title"]),g(a,{ref_key:"grantDataRef",ref:P,onHandleQuery:z},null,512)])}}});export{P as default};
