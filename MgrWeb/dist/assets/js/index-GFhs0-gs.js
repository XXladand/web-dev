import"./@wangeditor-Ur0005c_.js";import{c as e}from"./commonFunction-aYLftPu5.js";import{g as t}from"./index-DWGcUZYU.js";import{S as a}from"./sys-notice-api-BafTVakZ.js";import{d as o,_ as l,j as i,ah as r,ap as s,o as p,c as n,V as m,P as d,T as u,Q as c,O as g,U as j,u as y,a as f}from"./@vue-CX_mlhJe.js";import"./vue-clipboard3-De3GURIv.js";import"./clipboard-CKs6Xfnk.js";import"./@babel-Q_QrznUx.js";import"./formatTime-V_I984Ws.js";import"./vue-i18n-DOLUIXgH.js";import"./@intlify-8Jop7_C0.js";import"./vue-DMOwXDUL.js";import"./element-plus-B9gGnqkL.js";import"./lodash-es-Bx2dc0Qf.js";import"./@vueuse-DXufPiA3.js";import"./@element-plus-BOmeTCVz.js";import"./@sxzz-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-DCN6noHZ.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DHjS97uh.js";import"./pinia-CUaEdNPK.js";import"./vue-demi-DMxTsK9-.js";import"./jspdf-CH-AZmyM.js";import"./fflate-B3Xb404m.js";import"./vue-router-DCQgfElv.js";import"./js-cookie-BXEMiIsG.js";import"./nprogress-BXoedg-7.js";import"./axios-CURSphCx.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-DUD0Qdrs.js";import"./vform3-builds-n_pM9nIF.js";import"./vue-signature-pad-lyh4QR3Z.js";import"./signature_pad-edH0THtw.js";import"./merge-images-Cwm9rL5U.js";import"./vue3-tree-org-BzkJto3m.js";/* empty css                    */import"./vue-plugin-hiprint-DZDwPE-S.js";import"./jquery-VSNIoD5U.js";import"./jsbarcode-BgYCXnWS.js";import"./socket.io-client-Czs-wWz3.js";import"./engine.io-client-CYjl6Vq_.js";import"./engine.io-parser-BcOgFIoq.js";import"./@socket.io-mcuM6LAc.js";import"./debug-CmirTkX5.js";import"./ms-CufoL-nS.js";import"./socket.io-parser-CnrqkM7d.js";import"./canvg-FiHv1N34.js";import"./core-js-BJmvCVxN.js";import"./raf-B8RiLMb0.js";import"./performance-now-D4QiMMAM.js";import"./rgbcolor-Cv9DR9SS.js";import"./svg-pathdata-BQypvdxQ.js";import"./stackblur-canvas-WbqePTkn.js";const b={class:"notice-container"},v={style:{color:"#fff"}},w=f("span",null," 消息详情 ",-1),h={class:"w-e-text-container"},P=["innerHTML"],_={class:"dialog-footer"},z=o({name:"notice"}),k=o({...z,setup(o){const{removeHtml:z}=e(),k=l({loading:!1,noticeData:[],queryParams:{title:void 0,type:void 0},tableParams:{page:1,pageSize:20,total:0},editNoticeTitle:"",dialogVisible:!1,content:""});i((async()=>{S()}));const S=async()=>{var e,o;k.loading=!0;var l=await t(a).apiSysNoticePageReceivedGet(k.queryParams.title,k.queryParams.type,k.tableParams.page,k.tableParams.pageSize);k.noticeData=(null==(e=l.data.result)?void 0:e.items)??[],k.tableParams.total=null==(o=l.data.result)?void 0:o.total,k.loading=!1},V=()=>{k.queryParams.title=void 0,k.queryParams.type=void 0,S()},N=e=>{k.tableParams.pageSize=e,S()},x=e=>{k.tableParams.page=e,S()},q=({row:e,rowIndex:t})=>1===e.readStatus?"info-row":"";return(e,o)=>{const l=r("el-input"),i=r("el-form-item"),C=r("el-option"),T=r("el-select"),U=r("el-button"),D=r("el-button-group"),F=r("el-form"),H=r("el-card"),I=r("el-table-column"),L=r("el-tag"),M=r("el-table"),R=r("el-pagination"),B=r("ele-Bell"),E=r("el-icon"),G=r("el-dialog"),Q=s("loading");return p(),n("div",b,[m(H,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:d((()=>[m(F,{model:k.queryParams,ref:"queryForm",inline:!0},{default:d((()=>[m(i,{label:"标题"},{default:d((()=>[m(l,{modelValue:k.queryParams.title,"onUpdate:modelValue":o[0]||(o[0]=e=>k.queryParams.title=e),placeholder:"标题",clearable:""},null,8,["modelValue"])])),_:1}),m(i,{label:"类型"},{default:d((()=>[m(T,{modelValue:k.queryParams.type,"onUpdate:modelValue":o[1]||(o[1]=e=>k.queryParams.type=e),placeholder:"类型",clearable:""},{default:d((()=>[m(C,{label:"通知",value:1}),m(C,{label:"公告",value:2})])),_:1},8,["modelValue"])])),_:1}),m(i,null,{default:d((()=>[m(D,null,{default:d((()=>[m(U,{type:"primary",icon:"ele-Search",onClick:S},{default:d((()=>[u(" 查询 ")])),_:1}),m(U,{icon:"ele-Refresh",onClick:V},{default:d((()=>[u(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),m(H,{class:"full-table",shadow:"hover",style:{"margin-top":"5px"}},{default:d((()=>[c((p(),g(M,{data:k.noticeData,style:{width:"100%"},border:"","row-class-name":q},{default:d((()=>[m(I,{type:"index",label:"序号",width:"55",align:"center"}),m(I,{prop:"sysNotice.title",label:"标题","header-align":"center","show-overflow-tooltip":""}),m(I,{prop:"sysNotice.content",label:"内容","header-align":"center","show-overflow-tooltip":""},{default:d((e=>[u(j(y(z)(e.row.sysNotice.content)),1)])),_:1}),m(I,{prop:"sysNotice.type",label:"类型",width:"100",align:"center","show-overflow-tooltip":""},{default:d((e=>[1===e.row.sysNotice.type?(p(),g(L,{key:0},{default:d((()=>[u(" 通知 ")])),_:1})):(p(),g(L,{key:1,type:"warning"},{default:d((()=>[u(" 公告 ")])),_:1}))])),_:1}),m(I,{prop:"sysNotice.createTime",label:"创建时间",align:"center","show-overflow-tooltip":""}),m(I,{prop:"readStatus",label:"阅读状态",width:"100",align:"center","show-overflow-tooltip":""},{default:d((e=>[1===e.row.readStatus?(p(),g(L,{key:0,type:"info"},{default:d((()=>[u(" 已读 ")])),_:1})):(p(),g(L,{key:1,type:"danger"},{default:d((()=>[u(" 未读 ")])),_:1}))])),_:1}),m(I,{prop:"sysNotice.publicUserName",label:"发布者",align:"center","show-overflow-tooltip":""}),m(I,{prop:"sysNotice.publicTime",label:"发布时间",align:"center","show-overflow-tooltip":""}),m(I,{label:"操作",width:"80",fixed:"right",align:"center","show-overflow-tooltip":""},{default:d((e=>[m(U,{icon:"ele-InfoFilled",size:"small",text:"",type:"primary",onClick:o=>(async e=>{k.content=e.sysNotice.content,k.dialogVisible=!0,e.readStatus=1,await t(a).apiSysNoticeSetReadPost({id:e.sysNotice.id})})(e.row)},{default:d((()=>[u(" 详情 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[Q,k.loading]]),m(R,{currentPage:k.tableParams.page,"onUpdate:currentPage":o[2]||(o[2]=e=>k.tableParams.page=e),"page-size":k.tableParams.pageSize,"onUpdate:pageSize":o[3]||(o[3]=e=>k.tableParams.pageSize=e),total:k.tableParams.total,"page-sizes":[10,20,50,100],size:"small",background:"",onSizeChange:N,onCurrentChange:x,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])])),_:1}),m(G,{modelValue:k.dialogVisible,"onUpdate:modelValue":o[5]||(o[5]=e=>k.dialogVisible=e),draggable:"",width:"769px"},{header:d((()=>[f("div",v,[m(E,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:d((()=>[m(B)])),_:1}),w])])),footer:d((()=>[f("span",_,[m(U,{type:"primary",onClick:o[4]||(o[4]=e=>k.dialogVisible=!1)},{default:d((()=>[u("确认")])),_:1})])])),default:d((()=>[f("div",h,[f("div",{innerHTML:k.content,"data-slate-editor":""},null,8,P)])])),_:1},8,["modelValue"])])}}});export{k as default};
