import{B as e,j as s,R as a,a as t,k as n,g as r}from"./index-DWGcUZYU.js";import{s as o}from"./pinia-CUaEdNPK.js";import{d as i}from"./vuedraggable-CG4Q6IQk.js";import{a as u}from"./axios-CURSphCx.js";import{E as l}from"./element-plus-B9gGnqkL.js";import{d as c,r as d,_ as p,j as h,ah as m,o as U,O as y,P as f,a as S,c as I,a8 as M,F as v,V as w,T as g,U as P,u as k,K as L}from"./@vue-CX_mlhJe.js";import{_ as T}from"./_plugin-vue_export-helper-BCo6x5W8.js";const b=function(e){return{apiSysUserMenuAddPost:async(s,a={})=>{const t=new URL("/api/sysUserMenu/add","https://example.com");let n;e&&(n=e.baseOptions);const r={method:"POST",...n,...a},o={},i={};if(e&&e.accessToken){const s="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;o.Authorization="Bearer "+s}o["Content-Type"]="application/json-patch+json";const u=new URLSearchParams(t.search);for(const e in i)u.set(e,i[e]);for(const e in a.params)u.set(e,a.params[e]);t.search=new URLSearchParams(u).toString();let l=n&&n.headers?n.headers:{};r.headers={...o,...l,...a.headers};const c="string"!=typeof s||"application/json"===r.headers["Content-Type"];return r.data=c?JSON.stringify(void 0!==s?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:r}},apiSysUserMenuDeleteByUserIdUserIdPost:async(s,t={})=>{if(null==s)throw new a("userId","Required parameter userId was null or undefined when calling apiSysUserMenuDeleteByUserIdUserIdPost.");const n="/api/sysUserMenu/deleteByUserId/{userId}".replace("{userId}",encodeURIComponent(String(s))),r=new URL(n,"https://example.com");let o;e&&(o=e.baseOptions);const i={method:"POST",...o,...t},u={},l={};if(e&&e.accessToken){const s="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;u.Authorization="Bearer "+s}const c=new URLSearchParams(r.search);for(const e in l)c.set(e,l[e]);for(const e in t.params)c.set(e,t.params[e]);r.search=new URLSearchParams(c).toString();let d=o&&o.headers?o.headers:{};return i.headers={...u,...d,...t.headers},{url:r.pathname+r.search+r.hash,options:i}},apiSysUserMenuDeletePost:async(s,a={})=>{const t=new URL("/api/sysUserMenu/delete","https://example.com");let n;e&&(n=e.baseOptions);const r={method:"POST",...n,...a},o={},i={};if(e&&e.accessToken){const s="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;o.Authorization="Bearer "+s}o["Content-Type"]="application/json-patch+json";const u=new URLSearchParams(t.search);for(const e in i)u.set(e,i[e]);for(const e in a.params)u.set(e,a.params[e]);t.search=new URLSearchParams(u).toString();let l=n&&n.headers?n.headers:{};r.headers={...o,...l,...a.headers};const c="string"!=typeof s||"application/json"===r.headers["Content-Type"];return r.data=c?JSON.stringify(void 0!==s?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:r}},apiSysUserMenuUserMenuIdListUserIdGet:async(s,t={})=>{if(null==s)throw new a("userId","Required parameter userId was null or undefined when calling apiSysUserMenuUserMenuIdListUserIdGet.");const n="/api/sysUserMenu/userMenuIdList/{userId}".replace("{userId}",encodeURIComponent(String(s))),r=new URL(n,"https://example.com");let o;e&&(o=e.baseOptions);const i={method:"GET",...o,...t},u={},l={};if(e&&e.accessToken){const s="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;u.Authorization="Bearer "+s}const c=new URLSearchParams(r.search);for(const e in l)c.set(e,l[e]);for(const e in t.params)c.set(e,t.params[e]);r.search=new URLSearchParams(c).toString();let d=o&&o.headers?o.headers:{};return i.headers={...u,...d,...t.headers},{url:r.pathname+r.search+r.hash,options:i}},apiSysUserMenuUserMenuListUserIdGet:async(s,t={})=>{if(null==s)throw new a("userId","Required parameter userId was null or undefined when calling apiSysUserMenuUserMenuListUserIdGet.");const n="/api/sysUserMenu/userMenuList/{userId}".replace("{userId}",encodeURIComponent(String(s))),r=new URL(n,"https://example.com");let o;e&&(o=e.baseOptions);const i={method:"GET",...o,...t},u={},l={};if(e&&e.accessToken){const s="function"==typeof e.accessToken?await e.accessToken():await e.accessToken;u.Authorization="Bearer "+s}const c=new URLSearchParams(r.search);for(const e in l)c.set(e,l[e]);for(const e in t.params)c.set(e,t.params[e]);r.search=new URLSearchParams(c).toString();let d=o&&o.headers?o.headers:{};return i.headers={...u,...d,...t.headers},{url:r.pathname+r.search+r.hash,options:i}}}},R=function(e){return{async apiSysUserMenuAddPost(a,t){const n=await b(e).apiSysUserMenuAddPost(a,t);return(e=u,a=s)=>{const t={...n.options,url:a+n.url};return e.request(t)}},async apiSysUserMenuDeleteByUserIdUserIdPost(a,t){const n=await b(e).apiSysUserMenuDeleteByUserIdUserIdPost(a,t);return(e=u,a=s)=>{const t={...n.options,url:a+n.url};return e.request(t)}},async apiSysUserMenuDeletePost(a,t){const n=await b(e).apiSysUserMenuDeletePost(a,t);return(e=u,a=s)=>{const t={...n.options,url:a+n.url};return e.request(t)}},async apiSysUserMenuUserMenuIdListUserIdGet(a,t){const n=await b(e).apiSysUserMenuUserMenuIdListUserIdGet(a,t);return(e=u,a=s)=>{const t={...n.options,url:a+n.url};return e.request(t)}},async apiSysUserMenuUserMenuListUserIdGet(a,t){const n=await b(e).apiSysUserMenuUserMenuListUserIdGet(a,t);return(e=u,a=s)=>{const t={...n.options,url:a+n.url};return e.request(t)}}}};class x extends e{async apiSysUserMenuAddPost(e,s){return R(this.configuration).apiSysUserMenuAddPost(e,s).then((e=>e(this.axios,this.basePath)))}async apiSysUserMenuDeleteByUserIdUserIdPost(e,s){return R(this.configuration).apiSysUserMenuDeleteByUserIdUserIdPost(e,s).then((e=>e(this.axios,this.basePath)))}async apiSysUserMenuDeletePost(e,s){return R(this.configuration).apiSysUserMenuDeletePost(e,s).then((e=>e(this.axios,this.basePath)))}async apiSysUserMenuUserMenuIdListUserIdGet(e,s){return R(this.configuration).apiSysUserMenuUserMenuIdListUserIdGet(e,s).then((e=>e(this.axios,this.basePath)))}async apiSysUserMenuUserMenuListUserIdGet(e,s){return R(this.configuration).apiSysUserMenuUserMenuListUserIdGet(e,s).then((e=>e(this.axios,this.basePath)))}}const _={class:"myMods"},j={class:"setMods mt15"},G={class:"setMods"},O={style:{margin:"0 20px 20px 0"}},B=T(c({title:"快捷入口",icon:"ele-Monitor",description:"可以配置的快捷入口",__name:"myapp",setup(e){const s=d([]),a=d([]),u=d([]),c=d([]),T=d(!1),{userInfos:b}=o(t());p({navError:"",navData:[]}),h((()=>{D()}));const R=async()=>{try{return(await r(x).apiSysUserMenuUserMenuListUserIdGet(b.value.id)).data.result||[]}catch(e){return[]}},B=()=>{T.value=!0},D=async()=>{var e=n().requestOldRoutes||[];A(e),a.value=await R(),u.value=a.value.map((e=>e.name)),c.value=s.value.filter((e=>!u.value.includes(e.name)))},A=e=>{e.forEach((e=>{var a,t;if((null==(a=e.meta)?void 0:a.isHide)||3==e.type||1!=e.status)return!1;(null==(t=e.meta)?void 0:t.isIframe)&&(e.path=`/i/${e.name}`),e.children&&e.children.length>0?A(e.children):s.value.push(e)}))},C=async()=>{const e=a.value.map((e=>e.id)),s={userId:b.value.id,menuIdList:e};await r(x).apiSysUserMenuAddPost(s),l.success("设置常用成功"),T.value=!1},V=async()=>{a.value=await R(),u.value=a.value.map((e=>e.name)),c.value=s.value.filter((e=>!u.value.includes(e.name))),T.value=!1};return(e,s)=>{const t=m("SvgIcon"),n=m("router-link"),r=m("ele-Plus"),o=m("el-icon"),u=m("el-button"),l=m("el-drawer"),d=m("el-card");return U(),y(d,{shadow:"hover",header:"快捷入口"},{default:f((()=>[S("ul",_,[(U(!0),I(v,null,M(a.value,(e=>(U(),I("li",{key:e.path},[w(n,{to:{path:e.path}},{default:f((()=>{var s,a;return[w(t,{name:null==(s=e.meta)?void 0:s.icon,style:{"font-size":"18px"}},null,8,["name"]),S("p",null,P(null==(a=e.meta)?void 0:a.title),1)]})),_:2},1032,["to"])])))),128)),S("li",{class:"modItem-add",onClick:B},[S("a",null,[w(o,null,{default:f((()=>[w(r,{style:{color:"#fff"}})])),_:1})])])]),w(l,{title:"添加应用",modelValue:T.value,"onUpdate:modelValue":s[2]||(s[2]=e=>T.value=e),size:520,"destroy-on-close":"","before-close":V},{footer:f((()=>[S("div",O,[w(u,{onClick:V},{default:f((()=>[g("取消")])),_:1}),w(u,{type:"primary",onClick:C},{default:f((()=>[g("保存")])),_:1})])])),default:f((()=>[S("div",j,[S("h4",null,"我的常用 ( "+P(a.value.length)+" )",1),w(k(i),{tag:"ul",modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e),animation:"200","item-key":"id",group:"app",class:"draggable-box","force-fallback":"","fallback-on-body":""},{item:f((({element:e})=>[S("li",null,[w(t,{name:e.meta.icon,style:{"font-size":"18px"}},null,8,["name"]),S("p",null,P(e.meta.title),1)])])),_:1},8,["modelValue"])]),S("div",G,[S("h4",null,"全部应用 ( "+P(c.value.length)+" )",1),w(k(i),{tag:"ul",modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=e=>c.value=e),animation:"200","item-key":"id",group:"app",class:"draggable-box-all","force-fallback":"","fallback-on-body":""},{item:f((({element:e})=>[S("li",{style:L({background:e.meta.color||"#909399"})},[w(t,{name:e.meta.icon,style:{"font-size":"18px"}},null,8,["name"]),S("p",null,P(e.meta.title),1)],4)])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-2e1ddbe9"]]),D=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));export{D as _};
