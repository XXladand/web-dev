import e from"./regionTree-BAySNLwR.js";import{_ as a}from"./editRegion.vue_vue_type_script_setup_true_name_sysEditRegion_lang-BtpAXtZr.js";import{g as t}from"./index-DWGcUZYU.js";import{S as o}from"./sys-region-api-DtEAfRk1.js";import{c as i,E as r,e as l}from"./element-plus-B9gGnqkL.js";import{d as s,r as n,_ as p,j as m,ah as d,ap as u,o as c,c as g,V as y,P as j,Q as f,O as v,T as h}from"./@vue-CX_mlhJe.js";import"./@element-plus-BOmeTCVz.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./pinia-CUaEdNPK.js";import"./vue-demi-DMxTsK9-.js";import"./vue-DMOwXDUL.js";import"./@babel-Q_QrznUx.js";import"./jspdf-CH-AZmyM.js";import"./fflate-B3Xb404m.js";import"./vue-router-DCQgfElv.js";import"./vue-i18n-DOLUIXgH.js";import"./@intlify-8Jop7_C0.js";import"./js-cookie-BXEMiIsG.js";import"./nprogress-BXoedg-7.js";import"./axios-CURSphCx.js";import"./lodash-es-Bx2dc0Qf.js";import"./@vueuse-DXufPiA3.js";import"./@sxzz-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-DCN6noHZ.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DHjS97uh.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-DUD0Qdrs.js";import"./vform3-builds-n_pM9nIF.js";import"./vue-signature-pad-lyh4QR3Z.js";import"./signature_pad-edH0THtw.js";import"./merge-images-Cwm9rL5U.js";import"./vue3-tree-org-BzkJto3m.js";/* empty css                    */import"./vue-plugin-hiprint-DZDwPE-S.js";import"./jquery-VSNIoD5U.js";import"./jsbarcode-BgYCXnWS.js";import"./socket.io-client-Czs-wWz3.js";import"./engine.io-client-CYjl6Vq_.js";import"./engine.io-parser-BcOgFIoq.js";import"./@socket.io-mcuM6LAc.js";import"./debug-CmirTkX5.js";import"./ms-CufoL-nS.js";import"./socket.io-parser-CnrqkM7d.js";import"./canvg-FiHv1N34.js";import"./core-js-BJmvCVxN.js";import"./raf-B8RiLMb0.js";import"./performance-now-D4QiMMAM.js";import"./rgbcolor-Cv9DR9SS.js";import"./svg-pathdata-BQypvdxQ.js";import"./stackblur-canvas-WbqePTkn.js";const b={class:"sys-region-container"},w=s({name:"sysRegion"}),P=s({...w,setup(s){const w=n(),P=n(),_=p({loading:!1,regionData:[],queryParams:{id:-1,pid:void 0,name:void 0,code:void 0},tableParams:{page:1,pageSize:20,total:0},editRegionTitle:""});m((async()=>{await x()}));const x=async()=>{var e,a;_.loading=!0;let i=Object.assign(_.queryParams,_.tableParams),r=await t(o).apiSysRegionPagePost(i);_.regionData=(null==(e=r.data.result)?void 0:e.items)??[],_.tableParams.total=null==(a=r.data.result)?void 0:a.total,_.loading=!1},k=async()=>{_.queryParams.id=-1,_.queryParams.pid=void 0,_.queryParams.name=void 0,_.queryParams.code=void 0,await x()},R=()=>{var e;_.editRegionTitle="添加行政区域",null==(e=w.value)||e.openDialog({orderNo:100})},z=async e=>{_.queryParams.pid=e.id,_.queryParams.name=void 0,_.queryParams.code=void 0,await x()},q=async()=>{i.confirm("确认同步国家统计局行政区域数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{l({title:"提示",message:"后台努力同步中...",type:"success",position:"bottom-right"}),await t(o).apiSysRegionSyncPost({timeout:18e5})})).catch((()=>{}))},C=async e=>{_.tableParams.pageSize=e,await x()},T=async e=>{_.tableParams.page=e,await x()};return(l,s)=>{const n=d("el-col"),p=d("el-input"),m=d("el-form-item"),S=d("el-button"),D=d("el-button-group"),V=d("el-form"),B=d("el-card"),U=d("el-table-column"),E=d("el-table"),N=d("el-pagination"),Q=d("el-row"),F=u("auth"),L=u("loading");return c(),g("div",b,[y(Q,{gutter:8,style:{width:"100%",flex:"1"}},{default:j((()=>[y(n,{span:6,xs:24},{default:j((()=>[y(e,{ref_key:"regionTreeRef",ref:P,onNodeClick:z},null,512)])),_:1}),y(n,{span:18,xs:24,style:{display:"flex","flex-direction":"column"}},{default:j((()=>[y(B,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:j((()=>[y(V,{model:_.queryParams,ref:"queryForm",inline:!0},{default:j((()=>[y(m,{label:"行政名称"},{default:j((()=>[y(p,{modelValue:_.queryParams.name,"onUpdate:modelValue":s[0]||(s[0]=e=>_.queryParams.name=e),placeholder:"行政名称",clearable:""},null,8,["modelValue"])])),_:1}),y(m,{label:"行政代码"},{default:j((()=>[y(p,{modelValue:_.queryParams.code,"onUpdate:modelValue":s[1]||(s[1]=e=>_.queryParams.code=e),placeholder:"行政代码",clearable:""},null,8,["modelValue"])])),_:1}),y(m,null,{default:j((()=>[y(D,null,{default:j((()=>[f((c(),v(S,{type:"primary",icon:"ele-Search",onClick:x},{default:j((()=>[h(" 查询 ")])),_:1})),[[F,"sysRegion:page"]]),y(S,{icon:"ele-Refresh",onClick:k},{default:j((()=>[h(" 重置 ")])),_:1})])),_:1})])),_:1}),y(m,null,{default:j((()=>[f((c(),v(S,{type:"primary",icon:"ele-Plus",onClick:R},{default:j((()=>[h(" 新增 ")])),_:1})),[[F,"sysRegion:add"]]),f((c(),v(S,{type:"danger",icon:"ele-Lightning",onClick:q},{default:j((()=>[h(" 同步统计局 ")])),_:1})),[[F,"sysRegion:sync"]])])),_:1})])),_:1},8,["model"])])),_:1}),y(B,{class:"full-table",shadow:"hover",style:{"margin-top":"5px"}},{default:j((()=>[f((c(),v(E,{data:_.regionData,style:{width:"100%"},"row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},border:""},{default:j((()=>[y(U,{prop:"name",label:"行政名称",align:"center","show-overflow-tooltip":""}),y(U,{prop:"code",label:"行政代码",align:"center","show-overflow-tooltip":""}),y(U,{prop:"cityCode",label:"区号",align:"center","show-overflow-tooltip":""}),y(U,{prop:"orderNo",label:"排序",width:"70",align:"center","show-overflow-tooltip":""}),y(U,{prop:"remark",label:"备注","header-align":"center","show-overflow-tooltip":""}),y(U,{label:"操作",width:"140",fixed:"right",align:"center","show-overflow-tooltip":""},{default:j((e=>[f((c(),v(S,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:a=>{return t=e.row,_.editRegionTitle="编辑行政区域",void(null==(o=w.value)||o.openDialog(t));var t,o}},{default:j((()=>[h(" 编辑 ")])),_:2},1032,["onClick"])),[[F,"sysRegion:update"]]),f((c(),v(S,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:a=>{return l=e.row,void i.confirm(`确定删除行政区域：【${l.name}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var e;await t(o).apiSysRegionDeletePost({id:l.id}),await x(),null==(e=P.value)||e.initTreeData(),r.success("删除成功")})).catch((()=>{}));var l}},{default:j((()=>[h(" 删除 ")])),_:2},1032,["onClick"])),[[F,"sysRegion:delete"]])])),_:1})])),_:1},8,["data"])),[[L,_.loading]]),y(N,{currentPage:_.tableParams.page,"onUpdate:currentPage":s[2]||(s[2]=e=>_.tableParams.page=e),"page-size":_.tableParams.pageSize,"onUpdate:pageSize":s[3]||(s[3]=e=>_.tableParams.pageSize=e),total:_.tableParams.total,"page-sizes":[10,20,50,100],size:"small",background:"",onSizeChange:C,onCurrentChange:T,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])])),_:1})])),_:1})])),_:1}),y(a,{ref_key:"editRegionRef",ref:w,title:_.editRegionTitle,onHandleQuery:x},null,8,["title"])])}}});export{P as default};
