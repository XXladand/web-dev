import{d as e,r as o,_ as s,j as t,Z as i,ah as a,Q as r,W as n,o as l,c,a as m,J as u,a3 as p,T as d,U as v,V as f,P as k,u as j,a9 as g,X as w,n as y,bm as S,bk as h}from"./@vue-CX_mlhJe.js";import{f as L}from"./formatTime-V_I984Ws.js";import{u as b,a as _,L as x,f as T,g as I,S as D}from"./index-DWGcUZYU.js";import{s as C}from"./pinia-CUaEdNPK.js";import{s as M}from"./sm-crypto-v2-BPWIU65d.js";import{_ as P}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./jspdf-CH-AZmyM.js";import"./@babel-Q_QrznUx.js";import"./fflate-B3Xb404m.js";import"./vue-router-DCQgfElv.js";import"./vue-i18n-DOLUIXgH.js";import"./@intlify-8Jop7_C0.js";import"./vue-DMOwXDUL.js";import"./js-cookie-BXEMiIsG.js";import"./@element-plus-BOmeTCVz.js";import"./nprogress-BXoedg-7.js";import"./axios-CURSphCx.js";import"./element-plus-B9gGnqkL.js";import"./lodash-es-Bx2dc0Qf.js";import"./@vueuse-DXufPiA3.js";import"./@sxzz-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-DCN6noHZ.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DHjS97uh.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-DUD0Qdrs.js";import"./vform3-builds-n_pM9nIF.js";import"./vue-signature-pad-lyh4QR3Z.js";import"./signature_pad-edH0THtw.js";import"./merge-images-Cwm9rL5U.js";import"./vue3-tree-org-BzkJto3m.js";/* empty css                    */import"./vue-plugin-hiprint-DZDwPE-S.js";import"./jquery-VSNIoD5U.js";import"./jsbarcode-BgYCXnWS.js";import"./socket.io-client-Czs-wWz3.js";import"./engine.io-client-CYjl6Vq_.js";import"./engine.io-parser-BcOgFIoq.js";import"./@socket.io-mcuM6LAc.js";import"./debug-CmirTkX5.js";import"./ms-CufoL-nS.js";import"./socket.io-parser-CnrqkM7d.js";import"./canvg-FiHv1N34.js";import"./core-js-BJmvCVxN.js";import"./raf-B8RiLMb0.js";import"./performance-now-D4QiMMAM.js";import"./rgbcolor-Cv9DR9SS.js";import"./svg-pathdata-BQypvdxQ.js";import"./stackblur-canvas-WbqePTkn.js";import"./vue-demi-DMxTsK9-.js";import"./@noble-DPz6ZhRw.js";const z=e=>(S("data-v-189746af"),e=e(),h(),e),E=z((()=>m("div",{class:"layout-lock-screen-mask"},null,-1))),Y={class:"layout-lock-screen"},q={class:"layout-lock-screen-date-box"},F={class:"layout-lock-screen-date-box-time"},V={class:"layout-lock-screen-date-box-minutes"},A={class:"layout-lock-screen-date-box-info"},H={class:"layout-lock-screen-date-top"},U=z((()=>m("div",{class:"layout-lock-screen-date-top-text"},"上滑解锁",-1))),$={class:"layout-lock-screen-login"},W={class:"layout-lock-screen-login-box"},K={class:"layout-lock-screen-login-box-img"},R=["src"],B={class:"layout-lock-screen-login-box-name"},G={key:0,class:"layout-lock-screen-login-box-message"},J={key:1,class:"layout-lock-screen-login-box-value"},N={class:"layout-lock-screen-login-icon"},Q=e({name:"layoutLockScreen"}),X=P(e({...Q,setup(e){const S=o(),h=o(),P=b(),{themeConfig:z}=C(P),Q=_(),{userInfos:X}=C(Q),Z=s({transparency:1,downClientY:0,moveDifference:0,isShowLoockLogin:!1,isFlags:!1,querySelectorEl:"",time:{hm:"",s:"",mdq:""},setIntervalTime:0,isShowLockScreen:!1,isShowLockScreenIntervalTime:0,lockScreenPassword:"",message:"",showMessage:!1}),O=e=>{Z.isFlags=!0,Z.downClientY=e.clientY},ee=e=>{Z.isFlags=!0,Z.downClientY=e.touches[0].clientY},oe=e=>{Z.moveDifference=e.clientY-Z.downClientY,te()},se=e=>{Z.moveDifference=e.touches[0].clientY-Z.downClientY,te()},te=()=>{if(Z.isFlags){const e=Z.querySelectorEl,o=Z.transparency-=.005;if(Z.moveDifference>=0)return!1;e.setAttribute("style",`top:${Z.moveDifference}px;cursor:pointer;opacity:${o};`),Z.moveDifference<-400&&(e.setAttribute("style",`top:${-e.clientHeight}px;cursor:pointer;transition:all 0.3s ease;`),Z.moveDifference=-e.clientHeight,setTimeout((()=>{var o;e&&(null==(o=e.parentNode)||o.removeChild(e))}),300)),Z.moveDifference===-e.clientHeight&&(Z.isShowLoockLogin=!0,h.value.focus())}},ie=()=>{Z.isFlags=!1,Z.transparency=1,Z.moveDifference>=-400&&Z.querySelectorEl.setAttribute("style","top:0px;opacity:1;transition:all 0.3s ease;")},ae=()=>{Z.time.hm=L(new Date,"HH:MM"),Z.time.s=L(new Date,"SS"),Z.time.mdq=L(new Date,"mm月dd日，WWW")},re=()=>{z.value.isDrawer=!1,x.set("themeConfig",z.value)},ne=async()=>{if(Z.lockScreenPassword)try{if(void 0===X.account)return z.value.isLockScreen=!1,z.value.lockScreenTime=30,void re();const e=window.__env__.VITE_SM_PUBLIC_KEY,o=M.doEncrypt(Z.lockScreenPassword,e,1),[s,t]=await T(I(D).apiSysAuthUnLockScreenPost(o));if(s)return Z.message=s.message,Z.showMessage=!0,void(Z.lockScreenPassword="");t.data.result&&(z.value.isLockScreen=!1,z.value.lockScreenTime=30,re())}catch(e){Z.message=`出错了:${e}`,Z.showMessage=!0}},le=()=>{Z.showMessage=!1,y((()=>{h.value.focus()}))};return t((()=>{y((()=>{Z.querySelectorEl=S.value})),ae(),Z.setIntervalTime=window.setInterval((()=>{ae()}),1e3),z.value.isLockScreen?Z.isShowLockScreenIntervalTime=window.setInterval((()=>null==z.value.lockScreenTime?(z.value.lockScreenTime=300,re(),!1):z.value.lockScreenTime<=1?(Z.isShowLockScreen=!0,re(),!1):void z.value.lockScreenTime--),1e3):clearInterval(Z.isShowLockScreenIntervalTime),document.onkeydown=e=>{if("Enter"===e.key){if(0==Z.isShowLoockLogin){const e=setInterval((()=>{Z.isFlags=!0,Z.moveDifference=Z.moveDifference-10,te(),Z.moveDifference<-600&&clearInterval(e)}),5)}1==Z.showMessage&&le()}}})),i((()=>{window.clearInterval(Z.setIntervalTime),window.clearInterval(Z.isShowLockScreenIntervalTime)})),(e,o)=>{const s=a("SvgIcon"),t=a("el-button"),i=a("ele-Right"),y=a("el-icon"),L=a("el-input");return r((l(),c("div",null,[E,m("div",{class:u(["layout-lock-screen-img",{"layout-lock-screen-filter":Z.isShowLoockLogin}])},null,2),m("div",Y,[m("div",{class:"layout-lock-screen-date",ref_key:"layoutLockScreenDateRef",ref:S,onMousedown:O,onMousemove:oe,onMouseup:ie,onTouchstart:p(ee,["stop"]),onTouchmove:p(se,["stop"]),onTouchend:p(ie,["stop"])},[m("div",q,[m("div",F,[d(v(Z.time.hm),1),m("span",V,v(Z.time.s),1)]),m("div",A,v(Z.time.mdq),1)]),m("div",H,[f(s,{name:"ele-Top"}),U])],544),f(w,{name:"el-zoom-in-center"},{default:k((()=>[r(m("div",$,[m("div",W,[m("div",K,[m("img",{src:j(X).avatar||"https://img2.baidu.com/it/u=1978192862,2048448374&fm=253&fmt=auto&app=138&f=JPEG?w=504&h=500"},null,8,R)]),m("div",B,v(j(X).account),1),Z.showMessage?(l(),c("div",G,[m("span",null,v(Z.message),1),f(t,{style:{"max-width":"80px","margin-top":"20px"},size:"default",onClick:le},{default:k((()=>[d(" 确认 ")])),_:1})])):(l(),c("div",J,[f(L,{placeholder:"请输入密码",type:"password",ref_key:"layoutLockScreenInputRef",ref:h,size:"default",modelValue:Z.lockScreenPassword,"onUpdate:modelValue":o[0]||(o[0]=e=>Z.lockScreenPassword=e),onKeyup:o[1]||(o[1]=g(p((e=>ne()),["stop"]),["enter","native"]))},{append:k((()=>[f(t,{onClick:ne},{default:k((()=>[f(y,{class:"el-input__icon"},{default:k((()=>[f(i)])),_:1})])),_:1})])),_:1},8,["modelValue"])]))]),m("div",N,[f(s,{name:"ele-Microphone",size:20}),f(s,{name:"ele-AlarmClock",size:20}),f(s,{name:"ele-SwitchButton",size:20})])],512),[[n,Z.isShowLoockLogin]])])),_:1})])],512)),[[n,Z.isShowLockScreen]])}}}),[["__scopeId","data-v-189746af"]]);export{X as default};
