import{_ as e}from"./editOpenAccess.vue_vue_type_script_setup_true_name_sysOpenAccessEdit_lang-BqCT4bLx.js";import a from"./helpView-BpsLBu-f.js";import{_ as t}from"./modifyRecord.vue_vue_type_script_setup_true_lang-BJJtdc8n.js";import s from"./generateSign-C0GjvHes.js";import{g as o}from"./index-DWGcUZYU.js";import{S as r}from"./sys-open-access-api-i-cLQgUm.js";import{c as l,E as i}from"./element-plus-B9gGnqkL.js";import{d as n,r as p,_ as c,j as m,ah as u,ap as d,o as g,c as j,V as f,P as y,Q as v,O as b,T as _}from"./@vue-CX_mlhJe.js";import"./sys-tenant-api-rfUaKb-E.js";import"./axios-CURSphCx.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./pinia-CUaEdNPK.js";import"./vue-demi-DMxTsK9-.js";import"./vue-DMOwXDUL.js";import"./@babel-Q_QrznUx.js";import"./jspdf-CH-AZmyM.js";import"./fflate-B3Xb404m.js";import"./vue-router-DCQgfElv.js";import"./vue-i18n-DOLUIXgH.js";import"./@intlify-8Jop7_C0.js";import"./js-cookie-BXEMiIsG.js";import"./@element-plus-BOmeTCVz.js";import"./nprogress-BXoedg-7.js";import"./lodash-es-Bx2dc0Qf.js";import"./@vueuse-DXufPiA3.js";import"./@sxzz-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-DCN6noHZ.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DHjS97uh.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-DUD0Qdrs.js";import"./vform3-builds-n_pM9nIF.js";import"./vue-signature-pad-lyh4QR3Z.js";import"./signature_pad-edH0THtw.js";import"./merge-images-Cwm9rL5U.js";import"./vue3-tree-org-BzkJto3m.js";/* empty css                    */import"./vue-plugin-hiprint-DZDwPE-S.js";import"./jquery-VSNIoD5U.js";import"./jsbarcode-BgYCXnWS.js";import"./socket.io-client-Czs-wWz3.js";import"./engine.io-client-CYjl6Vq_.js";import"./engine.io-parser-BcOgFIoq.js";import"./@socket.io-mcuM6LAc.js";import"./debug-CmirTkX5.js";import"./ms-CufoL-nS.js";import"./socket.io-parser-CnrqkM7d.js";import"./canvg-FiHv1N34.js";import"./core-js-BJmvCVxN.js";import"./raf-B8RiLMb0.js";import"./performance-now-D4QiMMAM.js";import"./rgbcolor-Cv9DR9SS.js";import"./svg-pathdata-BQypvdxQ.js";import"./stackblur-canvas-WbqePTkn.js";const h={class:"sys-open-access-container"},w=n({name:"sysOpenAccess"}),P=n({...w,setup(n){const w=p(),P=p(),k=p(),z=c({loading:!1,openAccessData:[],queryParams:{accessKey:void 0},tableParams:{page:1,pageSize:20,total:0},editOpenAccessTitle:""});m((async()=>{A()}));const A=async()=>{var e,a;z.loading=!0;let t=Object.assign(z.queryParams,z.tableParams);var s=await o(r).apiSysOpenAccessPagePost(t);z.openAccessData=(null==(e=s.data.result)?void 0:e.items)??[],z.tableParams.total=null==(a=s.data.result)?void 0:a.total,z.loading=!1},O=()=>{z.queryParams.accessKey=void 0,A()},x=()=>{var e;z.editOpenAccessTitle="添加开放接口身份",null==(e=w.value)||e.openDialog({type:1})},C=e=>{z.tableParams.pageSize=e,A()},S=e=>{z.tableParams.page=e,A()},D=()=>{var e;null==(e=P.value)||e.openDialog()};return(n,p)=>{const c=u("el-input"),m=u("el-form-item"),q=u("el-button"),T=u("el-button-group"),K=u("el-form"),V=u("el-card"),R=u("el-table-column"),U=u("el-table"),E=u("el-pagination"),Q=d("auth"),B=d("loading");return g(),j("div",h,[f(V,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:y((()=>[f(K,{model:z.queryParams,ref:"queryForm",inline:!0},{default:y((()=>[f(m,{label:"身份标识"},{default:y((()=>[f(c,{modelValue:z.queryParams.accessKey,"onUpdate:modelValue":p[0]||(p[0]=e=>z.queryParams.accessKey=e),placeholder:"身份标识",clearable:""},null,8,["modelValue"])])),_:1}),f(m,null,{default:y((()=>[f(T,null,{default:y((()=>[v((g(),b(q,{type:"primary",icon:"ele-Search",onClick:A},{default:y((()=>[_(" 查询 ")])),_:1})),[[Q,"sysOpenAccess:page"]]),f(q,{icon:"ele-Refresh",onClick:O},{default:y((()=>[_(" 重置 ")])),_:1})])),_:1})])),_:1}),f(m,null,{default:y((()=>[v((g(),b(q,{type:"primary",icon:"ele-Plus",onClick:x},{default:y((()=>[_(" 新增 ")])),_:1})),[[Q,"sysOpenAccess:add"]]),f(q,{icon:"ele-QuestionFilled",onClick:D},{default:y((()=>[_(" 说明 ")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),f(V,{class:"full-table",shadow:"hover",style:{"margin-top":"5px"}},{default:y((()=>[v((g(),b(U,{data:z.openAccessData,style:{width:"100%"},border:""},{default:y((()=>[f(R,{type:"index",label:"序号",width:"55",align:"center"}),f(R,{prop:"accessKey",label:"身份标识","header-align":"center","show-overflow-tooltip":""}),f(R,{prop:"accessSecret",label:"密钥","header-align":"center","show-overflow-tooltip":""}),f(R,{prop:"bindUserAccount",label:"绑定用户账号","header-align":"center","show-overflow-tooltip":""}),f(R,{prop:"bindTenantName",label:"绑定租户名称","header-align":"center","show-overflow-tooltip":""}),f(R,{label:"修改记录",width:"100",align:"center","show-overflow-tooltip":""},{default:y((e=>[f(t,{data:e.row},null,8,["data"])])),_:1}),f(R,{label:"操作",width:"200",fixed:"right",align:"center","show-overflow-tooltip":""},{default:y((e=>[v((g(),b(q,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:a=>{return t=e.row,z.editOpenAccessTitle="编辑开放接口身份",void(null==(s=w.value)||s.openDialog(t));var t,s},disabled:1===e.row.status},{default:y((()=>[_(" 编辑 ")])),_:2},1032,["onClick","disabled"])),[[Q,"sysOpenAccess:update"]]),v((g(),b(q,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:a=>{return t=e.row,void l.confirm(`确定删除开放接口身份：【${t.accessKey}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await o(r).apiSysOpenAccessDeletePost({id:t.id}),A(),i.success("删除成功")})).catch((()=>{}));var t},disabled:1===e.row.status},{default:y((()=>[_(" 删除 ")])),_:2},1032,["onClick","disabled"])),[[Q,"sysOpenAccess:delete"]]),f(q,{size:"small",text:"",onClick:a=>{return t=e.row,void(null==(s=k.value)||s.openDialog(t));var t,s}},{default:y((()=>[_(" 生成签名 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[B,z.loading]]),f(E,{currentPage:z.tableParams.page,"onUpdate:currentPage":p[1]||(p[1]=e=>z.tableParams.page=e),"page-size":z.tableParams.pageSize,"onUpdate:pageSize":p[2]||(p[2]=e=>z.tableParams.pageSize=e),total:z.tableParams.total,"page-sizes":[10,20,50,100],size:"small",background:"",onSizeChange:C,onCurrentChange:S,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])])),_:1}),f(e,{ref_key:"editOpenAccessRef",ref:w,title:z.editOpenAccessTitle,onHandleQuery:A},null,8,["title"]),f(a,{ref_key:"helpViewRef",ref:P},null,512),f(s,{ref_key:"generateSignRef",ref:k},null,512)])}}});export{P as default};
