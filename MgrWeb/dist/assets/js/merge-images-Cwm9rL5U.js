var n={format:"image/png",quality:.92,width:void 0,height:void 0,Canvas:void 0,crossOrigin:void 0},a=function(a,t){return void 0===a&&(a=[]),void 0===t&&(t={}),new Promise((function(i){var r=(t=Object.assign({},n,t)).Canvas?new t.Canvas:window.document.createElement("canvas"),o=t.Canvas?t.Canvas.Image:window.Image;t.Canvas&&(t.quality*=100);var e=a.map((function(n){return new Promise((function(a,i){"Object"!==n.constructor.name&&(n={src:n});var r=new o;r.crossOrigin=t.crossOrigin,r.onerror=function(){return i(new Error("Couldn't load image"))},r.onload=function(){return a(Object.assign({},n,{img:r}))},r.src=n.src}))})),c=r.getContext("2d");i(Promise.all(e).then((function(n){var a=function(a){return t[a]||Math.max.apply(Math,n.map((function(n){return n.img[a]})))};return r.width=a("width"),r.height=a("height"),n.forEach((function(n){return c.globalAlpha=n.opacity?n.opacity:1,c.drawImage(n.img,n.x||0,n.y||0)})),t.Canvas&&"image/jpeg"===t.format?new Promise((function(n){r.toDataURL(t.format,{quality:t.quality,progressive:!1},(function(a,t){if(a)throw a;n(t)}))})):r.toDataURL(t.format,t.quality)})))}))};export{a as m};
