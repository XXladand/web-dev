import{d as e,r as l,_ as a,ah as o,o as s,c as t,V as r,P as i,a as d,T as u,F as m,a8 as n,Q as p,W as c,O as f}from"./@vue-CX_mlhJe.js";import g from"./orgTree-CG-9udoW.js";import{g as y}from"./index-DWGcUZYU.js";import{S as v}from"./sys-role-api-CtWvDK07.js";const S={class:"sys-grantData-container"},h={style:{color:"#fff"}},b=d("span",null," 授权数据范围 ",-1),_={class:"dialog-footer"},w=e({name:"sysGrantData"}),D=e({...w,emits:["handleQuery"],setup(e,{expose:w,emit:D}){const F=D,x=l(),k=a({isShowDialog:!1,ruleForm:{},dataScopeType:[{value:1,label:"全部数据"},{value:2,label:"本部门及以下数据"},{value:3,label:"本部门数据"},{value:4,label:"仅本人数据"},{value:5,label:"自定义数据"}]}),V=()=>{k.isShowDialog=!1},T=async()=>{var e;5===k.ruleForm.dataScope&&(k.ruleForm.orgIdList=null==(e=x.value)?void 0:e.getCheckedKeys()),await y(v).apiSysRoleGrantDataScopePost(k.ruleForm),F("handleQuery"),k.isShowDialog=!1};return w({openDialog:async e=>{k.ruleForm=JSON.parse(JSON.stringify(e));var l=await y(v).apiSysRoleOwnOrgListGet(e.id);setTimeout((()=>{var e;null==(e=x.value)||e.setCheckedKeys(l.data.result)}),100),k.isShowDialog=!0}}),(e,l)=>{const a=o("ele-Edit"),y=o("el-icon"),v=o("el-option"),w=o("el-select"),D=o("el-form-item"),F=o("el-col"),O=o("el-row"),j=o("el-form"),C=o("el-button"),G=o("el-dialog");return s(),t("div",S,[r(G,{modelValue:k.isShowDialog,"onUpdate:modelValue":l[1]||(l[1]=e=>k.isShowDialog=e),draggable:"","close-on-click-modal":!1,width:"450px"},{header:i((()=>[d("div",h,[r(y,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:i((()=>[r(a)])),_:1}),b])])),footer:i((()=>[d("span",_,[r(C,{onClick:V},{default:i((()=>[u("取 消")])),_:1}),r(C,{type:"primary",onClick:T},{default:i((()=>[u("确 定")])),_:1})])])),default:i((()=>[r(j,{model:k.ruleForm,"label-position":"top"},{default:i((()=>[r(O,{gutter:35},{default:i((()=>[r(F,{xs:24,sm:24,md:24,lg:24,xl1:24,class:"mb20"},{default:i((()=>[r(D,{label:"数据范围："},{default:i((()=>[r(w,{modelValue:k.ruleForm.dataScope,"onUpdate:modelValue":l[0]||(l[0]=e=>k.ruleForm.dataScope=e),placeholder:"数据范围",style:{width:"100%"}},{default:i((()=>[(s(!0),t(m,null,n(k.dataScopeType,(e=>(s(),f(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(r(F,{xs:24,sm:24,md:24,lg:24,xl1:24},{default:i((()=>[r(D,{label:"机构列表："},{default:i((()=>[r(g,{ref_key:"orgTreeRef",ref:x,class:"w100"},null,512)])),_:1})])),_:1},512),[[c,5===k.ruleForm.dataScope]])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{D as _};
