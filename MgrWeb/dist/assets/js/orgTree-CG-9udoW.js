import{M as e,E as o}from"./@element-plus-BOmeTCVz.js";import{g as s}from"./index-DWGcUZYU.js";import{S as t}from"./sys-org-api-BuTSvnhC.js";import{d as a,r as i,_ as r,j as l,w as d,ah as m,ap as n,o as p,O as c,P as u,a as j,V as g,u as h,T as f,Q as v,c as y,U as k}from"./@vue-CX_mlhJe.js";import{_}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./pinia-CUaEdNPK.js";import"./vue-demi-DMxTsK9-.js";import"./vue-DMOwXDUL.js";import"./@babel-Q_QrznUx.js";import"./jspdf-CH-AZmyM.js";import"./fflate-B3Xb404m.js";import"./vue-router-DCQgfElv.js";import"./vue-i18n-DOLUIXgH.js";import"./@intlify-8Jop7_C0.js";import"./js-cookie-BXEMiIsG.js";import"./nprogress-BXoedg-7.js";import"./axios-CURSphCx.js";import"./element-plus-B9gGnqkL.js";import"./lodash-es-Bx2dc0Qf.js";import"./@vueuse-DXufPiA3.js";import"./@sxzz-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-DCN6noHZ.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DHjS97uh.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-DUD0Qdrs.js";import"./vform3-builds-n_pM9nIF.js";import"./vue-signature-pad-lyh4QR3Z.js";import"./signature_pad-edH0THtw.js";import"./merge-images-Cwm9rL5U.js";import"./vue3-tree-org-BzkJto3m.js";/* empty css                    */import"./vue-plugin-hiprint-DZDwPE-S.js";import"./jquery-VSNIoD5U.js";import"./jsbarcode-BgYCXnWS.js";import"./socket.io-client-Czs-wWz3.js";import"./engine.io-client-CYjl6Vq_.js";import"./engine.io-parser-BcOgFIoq.js";import"./@socket.io-mcuM6LAc.js";import"./debug-CmirTkX5.js";import"./ms-CufoL-nS.js";import"./socket.io-parser-CnrqkM7d.js";import"./canvg-FiHv1N34.js";import"./core-js-BJmvCVxN.js";import"./raf-B8RiLMb0.js";import"./performance-now-D4QiMMAM.js";import"./rgbcolor-Cv9DR9SS.js";import"./svg-pathdata-BQypvdxQ.js";import"./stackblur-canvas-WbqePTkn.js";const x={class:"card-header"},w={class:"tree-h-flex"},b={class:"tree-h-left"},C={class:"tree-h-right"},D={style:{"margin-bottom":"45px"}},A=_(a({__name:"orgTree",emits:["node-click"],setup(a,{expose:_,emit:A}){const N=i(""),z=i(),S=r({loading:!1,orgData:[],isShowCheckbox:!1,ownOrgData:[]});l((()=>{T()})),d(N,(e=>{z.value.filter(e)}));const T=async()=>{S.loading=!0;var e=await s(t).apiSysOrgListGet(0);S.orgData=e.data.result??[],S.loading=!1},K=(e,o)=>!e||o.name.includes(e),O=async e=>{if("expandAll"==e)for(let o=0;o<z.value.store._getAllNodes().length;o++)z.value.store._getAllNodes()[o].expanded=!0;else if("collapseAll"==e)for(let o=0;o<z.value.store._getAllNodes().length;o++)z.value.store._getAllNodes()[o].expanded=!1;else"refresh"==e?T():"rootNode"==e&&V("node-click",{id:0,name:""})},V=A,P=e=>{V("node-click",{id:e.id,name:e.name})};return _({initTreeData:T,setCheckedKeys:e=>{S.isShowCheckbox=!0,z.value.setCheckedKeys([]),S.ownOrgData=e},getCheckedKeys:()=>z.value.getCheckedKeys()}),(s,t)=>{const a=m("el-input"),i=m("el-icon"),r=m("el-button"),l=m("el-dropdown-item"),d=m("el-dropdown-menu"),_=m("el-dropdown"),A=m("ele-School"),T=m("ele-PriceTag"),V=m("ele-CollectionTag"),U=m("el-tree"),q=m("el-card"),E=n("loading");return p(),c(q,{class:"box-card",shadow:"hover",style:{height:"100%"},"body-style":"height:100%; overflow:auto"},{header:u((()=>[j("div",x,[j("div",w,[j("div",b,[g(a,{"prefix-icon":h(e),modelValue:N.value,"onUpdate:modelValue":t[0]||(t[0]=e=>N.value=e),placeholder:"机构名称"},null,8,["prefix-icon","modelValue"])]),j("div",C,[g(_,{onCommand:O},{dropdown:u((()=>[g(d,null,{default:u((()=>[g(l,{command:"expandAll"},{default:u((()=>[f("全部展开")])),_:1}),g(l,{command:"collapseAll"},{default:u((()=>[f("全部折叠")])),_:1}),g(l,{command:"rootNode"},{default:u((()=>[f("根节点")])),_:1}),g(l,{command:"refresh"},{default:u((()=>[f("刷新")])),_:1})])),_:1})])),default:u((()=>[g(r,{style:{"margin-left":"8px",width:"34px"}},{default:u((()=>[g(i,{class:"el-icon--center"},{default:u((()=>[g(h(o))])),_:1})])),_:1})])),_:1})])])])])),default:u((()=>[v((p(),y("div",D,[g(U,{ref_key:"treeRef",ref:z,class:"filter-tree",data:S.orgData,"node-key":"id",props:{children:"children",label:"name"},"filter-node-method":K,onNodeClick:P,"show-checkbox":S.isShowCheckbox,"default-checked-keys":S.ownOrgData,"highlight-current":"","check-strictly":""},{default:u((({node:e})=>[1==e.level?(p(),c(i,{key:0,size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:u((()=>[g(A)])),_:1})):2==e.level?(p(),c(i,{key:1,size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:u((()=>[g(T)])),_:1})):(p(),c(i,{key:2,size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:u((()=>[g(V)])),_:1})),f(" "+k(e.label),1)])),_:1},8,["data","show-checkbox","default-checked-keys"])])),[[E,S.loading]])])),_:1})}}}),[["__scopeId","data-v-860a8d6a"]]);export{A as default};
